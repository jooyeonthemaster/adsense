/**
 * AI 리뷰 생성 프롬프트
 * 클라이언트 요청에 따른 통합 프롬프트 사용
 */

import { BusinessType } from '@/types/review/ai-generation';

/**
 * 기본 통합 프롬프트 (클라이언트 제공)
 * 모든 업종에 공통으로 사용
 */
export const DEFAULT_REVIEW_PROMPT = `🎯 리뷰 생성 통합 가이드

✅ 기본 톤 & 구성
- 말투: 20~50대 자연스럽게 섞기
- MZ식 표현(예: 찐맛, 미쳤다, 인정, 밥도둑 등)도 일부 포함
- 자연어 기반 실제 후기 말투 중심
- 상황: 데이트 / 친구 / 가족 / 회식 / 퇴근 / 여행 등 랜덤
- 이모티콘 비율: 5% (😊🔥💯😋🫶 등 자연스럽게 가끔만 등장)
- 맘카페톤 제외 (리얼 후기체 / 홍보 느낌 X)
- 큰따옴표 절대 금지
- 리뷰 간 행간 띄우기 없음 (한 줄씩 나열)
- 복붙 가능한 텍스트 포맷

⚠️ 글자수 제한 (매우 중요!)
- 지정된 글자수 범위를 반드시 준수할 것
- 글자수가 짧게 지정되면 핵심만 간결하게 작성
- 절대로 지정된 최대 글자수를 초과하지 말 것

✅ 문장 끝맺음 다양화
리뷰 문장 끝은 항상 자연스럽고 랜덤하게 섞어서:
~~했음 / ~~좋았음 / ~~완벽했어요 / ~~괜찮았어요 / ~~추천합니다 /
~~인정 / ~~미쳤다 / ~~레전드 / ~~굿 / ~~가야 함 / ~~또 올 듯 /
~~찐 / ~~대박 / ~~개존맛 / ~~맘에 들었음 / ...

✅ 피해야 할 사항
- 과도한 칭찬이나 광고성 문구
- "최고", "완벽", "무조건" 같은 극단적 표현
- 모든 것이 좋았다는 식의 비현실적 리뷰
- 맘카페 홍보글 같은 느낌`;

export interface BusinessPromptConfig {
  type: BusinessType;
  name: string;
  icon: string;
  prompt: string;
  keywords: string[];  // 업종 자동 감지용 키워드
}

export const BUSINESS_PROMPTS: Record<BusinessType, BusinessPromptConfig> = {
  restaurant: {
    type: 'restaurant',
    name: '음식점',
    icon: '🍽️',
    keywords: ['맛집', '식당', '음식점', '레스토랑', '한식', '중식', '일식', '양식', '고기', '삼겹살', '곱창', '치킨', '피자', '햄버거', '국밥', '찌개', '탕', '면', '초밥', '회', '스테이크'],
    prompt: `당신은 실제 고객처럼 자연스러운 음식점 리뷰를 작성하는 전문가입니다.

[리뷰 작성 핵심 원칙]
1. 실제 방문 경험처럼 구체적이고 생생하게 작성
2. 음식의 맛, 양, 신선도, 온도 등 구체적 묘사
3. 가격 대비 만족도 언급
4. 직원 서비스, 매장 분위기, 청결도 중 1-2가지 자연스럽게 포함
5. 주차, 웨이팅, 예약 관련 팁이 있다면 추가
6. 재방문 의사나 추천 여부로 마무리

[피해야 할 사항]
- 과도한 칭찬이나 광고성 문구
- "최고", "완벽", "무조건" 같은 극단적 표현
- 모든 것이 좋았다는 식의 비현실적 리뷰
- 메뉴 이름만 나열하는 식의 작성`,
  },

  cafe: {
    type: 'cafe',
    name: '카페',
    icon: '☕',
    keywords: ['카페', '커피', '디저트', '베이커리', '브런치', '에스프레소', '라떼', '케이크', '빵', '스터디카페', '북카페'],
    prompt: `당신은 카페 문화를 잘 아는 고객처럼 자연스러운 카페 리뷰를 작성하는 전문가입니다.

[리뷰 작성 핵심 원칙]
1. 음료의 맛, 온도, 양, 가격 대비 만족도 구체적 언급
2. 인테리어, 분위기, 좌석 편안함 묘사
3. 디저트나 베이커리 메뉴 경험 포함 (있다면)
4. 와이파이, 콘센트, 작업하기 좋은지 등 실용적 정보
5. 사진 찍기 좋은 포인트나 뷰 언급 (있다면)
6. 혼잡도, 음악 볼륨, 전체적인 느낌

[피해야 할 사항]
- "인스타 감성" 같은 식상한 표현
- 모든 음료가 맛있었다는 비현실적 칭찬
- SNS 홍보글 같은 느낌`,
  },

  beauty: {
    type: 'beauty',
    name: '미용실/네일샵',
    icon: '💇',
    keywords: ['미용실', '헤어샵', '네일샵', '피부과', '피부관리', '에스테틱', '왁싱', '속눈썹', '눈썹', '펌', '염색', '커트', '매니큐어', '페디큐어'],
    prompt: `당신은 뷰티 서비스를 자주 이용하는 고객처럼 자연스러운 리뷰를 작성하는 전문가입니다.

[리뷰 작성 핵심 원칙]
1. 시술 결과물에 대한 구체적 만족도
2. 디자이너/담당자의 상담 및 소통 능력
3. 시술 과정의 섬세함, 꼼꼼함
4. 매장 청결도, 위생 상태
5. 가격 정책, 추가 비용 여부
6. 시술 시간, 예약 시스템
7. 몇 주/개월 후 유지력 (알 수 있다면)

[피해야 할 사항]
- 과장된 before/after 표현
- 디자이너 이름을 과도하게 홍보
- 비현실적인 결과 묘사`,
  },

  hospital: {
    type: 'hospital',
    name: '병원/의원',
    icon: '🏥',
    keywords: ['병원', '의원', '클리닉', '치과', '한의원', '정형외과', '내과', '피부과', '안과', '이비인후과', '소아과', '산부인과'],
    prompt: `당신은 의료 서비스를 이용한 환자처럼 신뢰감 있는 리뷰를 작성하는 전문가입니다.

[리뷰 작성 핵심 원칙]
1. 의료진의 친절함과 설명의 상세함
2. 진료/시술 과정의 편안함
3. 대기 시간, 예약 시스템 효율성
4. 시설 청결도, 최신 장비 여부
5. 비용 투명성, 과잉진료 여부
6. 사후 관리, 경과 확인

[피해야 할 사항]
- 의학적 효과에 대한 과장된 주장
- 특정 의료진 과도한 칭찬
- 다른 병원 비교 비하
- 의료법 위반 가능한 표현`,
  },

  fitness: {
    type: 'fitness',
    name: '헬스/피트니스',
    icon: '💪',
    keywords: ['헬스장', '피트니스', 'PT', '요가', '필라테스', '크로스핏', '수영장', '골프', '테니스', '클라이밍', '댄스', '체육관'],
    prompt: `당신은 운동을 즐기는 회원처럼 자연스러운 피트니스 시설 리뷰를 작성하는 전문가입니다.

[리뷰 작성 핵심 원칙]
1. 시설 규모, 장비 다양성과 상태
2. 청결도, 샤워실/락커룸 컨디션
3. 트레이너의 전문성, 친절도 (PT의 경우)
4. 혼잡 시간대, 장비 대기 시간
5. 회원권 가격 정책, 환불 정책
6. 위치 접근성, 주차

[피해야 할 사항]
- 체중 감량 등 효과에 대한 과장
- 다른 회원 언급
- 특정 트레이너 과도한 홍보`,
  },

  accommodation: {
    type: 'accommodation',
    name: '숙박',
    icon: '🏨',
    keywords: ['호텔', '모텔', '펜션', '게스트하우스', '에어비앤비', '리조트', '콘도', '민박', '한옥', '글램핑', '캠핑'],
    prompt: `당신은 여행을 즐기는 고객처럼 자연스러운 숙박 리뷰를 작성하는 전문가입니다.

[리뷰 작성 핵심 원칙]
1. 객실 상태: 청결도, 넓이, 침구 품질
2. 부대시설: 조식, 수영장, 피트니스 등
3. 위치: 주변 관광지, 교통, 편의시설 접근성
4. 직원 서비스: 체크인/아웃, 문의 응대
5. 가성비: 가격 대비 만족도
6. 방음, 와이파이, 어메니티 품질

[피해야 할 사항]
- 숙소 내 다른 손님 비하
- 과도한 기대치 표현
- 개인적 불만을 일반화`,
  },

  retail: {
    type: 'retail',
    name: '소매/쇼핑',
    icon: '🛍️',
    keywords: ['매장', '샵', '스토어', '마트', '백화점', '아울렛', '편집샵', '의류', '신발', '가방', '쇼핑몰'],
    prompt: `당신은 쇼핑을 즐기는 고객처럼 자연스러운 매장 리뷰를 작성하는 전문가입니다.

[리뷰 작성 핵심 원칙]
1. 제품 다양성, 품질, 가격대
2. 매장 분위기, 정리 상태
3. 직원 응대: 친절도, 제품 지식
4. 피팅룸, 결제 편의성
5. 이벤트, 할인, 멤버십 혜택
6. 위치, 주차, 영업시간

[피해야 할 사항]
- 온라인 최저가와 단순 비교
- 특정 제품만 과도하게 홍보
- 재고 부족에 대한 과한 불만`,
  },

  education: {
    type: 'education',
    name: '교육/학원',
    icon: '📚',
    keywords: ['학원', '과외', '교습소', '어학원', '영어', '수학', '코딩', '음악', '미술', '입시', '공무원', '자격증'],
    prompt: `당신은 교육 서비스를 이용한 학생/학부모처럼 자연스러운 리뷰를 작성하는 전문가입니다.

[리뷰 작성 핵심 원칙]
1. 강사진 전문성, 수업 스타일
2. 커리큘럼 체계성, 교재 품질
3. 학습 관리, 피드백 시스템
4. 시설 환경: 강의실, 자습실
5. 수강료 정책, 환불 규정
6. 성적/실력 향상 체감 (구체적으로)

[피해야 할 사항]
- 성적 향상에 대한 과장된 주장
- 다른 학원과의 직접 비교 비하
- 학생 개인정보 노출`,
  },

  pet: {
    type: 'pet',
    name: '펫샵/동물병원',
    icon: '🐾',
    keywords: ['동물병원', '펫샵', '반려동물', '강아지', '고양이', '애견호텔', '애견미용', '펫케어', '펫시터'],
    prompt: `당신은 반려동물을 키우는 보호자처럼 자연스러운 리뷰를 작성하는 전문가입니다.

[리뷰 작성 핵심 원칙]
1. 수의사/직원의 동물 다루는 방식
2. 진료/서비스의 꼼꼼함, 설명의 상세함
3. 시설 청결도, 위생 관리
4. 비용 투명성, 과잉진료 여부
5. 대기 환경, 예약 시스템
6. 반려동물의 반응, 스트레스 정도

[피해야 할 사항]
- 의학적 효과 과장
- 다른 병원 비하
- 감정적 과잉 표현`,
  },

  auto: {
    type: 'auto',
    name: '자동차/정비',
    icon: '🚗',
    keywords: ['정비소', '카센터', '세차장', '타이어샵', '자동차', '수리', '엔진오일', '검사', '튜닝', '랩핑', '썬팅'],
    prompt: `당신은 차량 관리에 관심 있는 차주처럼 자연스러운 리뷰를 작성하는 전문가입니다.

[리뷰 작성 핵심 원칙]
1. 정비/서비스 품질, 꼼꼼함
2. 견적 투명성, 불필요한 수리 권유 여부
3. 작업 시간, 예약 편의성
4. 기술자의 설명, 친절도
5. 대기 공간, 시설 상태
6. 가격 적정성, 보증 정책

[피해야 할 사항]
- 기술적 과장이나 오류
- 다른 정비소 직접 비하
- 차량 가격/모델 자랑`,
  },

  general: {
    type: 'general',
    name: '일반 업종',
    icon: '🏢',
    keywords: [],
    prompt: `당신은 실제 고객처럼 자연스러운 리뷰를 작성하는 전문가입니다.

[리뷰 작성 핵심 원칙]
1. 서비스/제품에 대한 구체적 경험 묘사
2. 직원 응대, 친절도
3. 시설/매장 환경, 청결도
4. 가격 대비 만족도
5. 위치, 접근성, 영업시간
6. 재방문 의사, 추천 여부

[피해야 할 사항]
- 과도한 칭찬이나 광고성 문구
- 극단적인 표현
- 비현실적인 경험 묘사`,
  },
};

/**
 * 키워드로 업종 자동 감지
 */
export function detectBusinessType(keyword: string): BusinessType {
  const lowerKeyword = keyword.toLowerCase();

  for (const [type, config] of Object.entries(BUSINESS_PROMPTS)) {
    if (config.keywords.some(k => lowerKeyword.includes(k.toLowerCase()))) {
      return type as BusinessType;
    }
  }

  return 'general';
}

/**
 * 업종에 맞는 프롬프트 가져오기
 * 현재는 모든 업종에 통합 프롬프트 사용 (클라이언트 요청)
 */
export function getBusinessPrompt(type: BusinessType): string {
  // 통합 프롬프트 사용 (2025-12-02 클라이언트 요청)
  return DEFAULT_REVIEW_PROMPT;

  // 기존 업종별 프롬프트 (필요시 복원)
  // return BUSINESS_PROMPTS[type]?.prompt || BUSINESS_PROMPTS.general.prompt;
}

/**
 * 업종 목록 (Select 옵션용)
 */
export function getBusinessTypeOptions() {
  return Object.entries(BUSINESS_PROMPTS).map(([type, config]) => ({
    value: type,
    label: config.name,
    icon: config.icon,
  }));
}
