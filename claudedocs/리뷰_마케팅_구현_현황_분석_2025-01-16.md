# ë¦¬ë·° ë§ˆì¼€íŒ… ê¸°ëŠ¥ êµ¬í˜„ í˜„í™© ë¶„ì„

**ë¶„ì„ ì¼ì‹œ**: 2025-01-16
**ë¶„ì„ ëŒ€ìƒ**: ë°©ë¬¸ìž ë¦¬ë·° + Kë§µ ë¦¬ë·°

---

## ðŸ“Š 1. í˜„ìž¬ êµ¬í˜„ ìƒí™© ìš”ì•½

### âœ… êµ¬í˜„ ì™„ë£Œëœ ë¶€ë¶„

#### 1.1 í´ë¼ì´ì–¸íŠ¸ íŽ˜ì´ì§€ (4ê°œ ëª¨ë‘ êµ¬í˜„ë¨)
```
âœ… /dashboard/review/visitor (ë°©ë¬¸ìž ë¦¬ë·° ì ‘ìˆ˜)
âœ… /dashboard/review/visitor/status (ë°©ë¬¸ìž ë¦¬ë·° í˜„í™©)
âœ… /dashboard/review/kmap (Kë§µ ë¦¬ë·° ì ‘ìˆ˜)
âœ… /dashboard/review/kmap/status (Kë§µ ë¦¬ë·° í˜„í™©)
```

#### 1.2 API ì—”ë“œí¬ì¸íŠ¸ (2ê°œ êµ¬í˜„ë¨)
```
âœ… POST /api/submissions/receipt (ë°©ë¬¸ìž ë¦¬ë·° ì ‘ìˆ˜ API)
âœ… POST /api/submissions/kakaomap (Kë§µ ë¦¬ë·° ì ‘ìˆ˜ API)
```

#### 1.3 ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ
```sql
âœ… receipt_review_submissions (ì˜ìˆ˜ì¦ ë¦¬ë·° í…Œì´ë¸”)
âœ… kakaomap_review_submissions (ì¹´ì¹´ì˜¤ë§µ ë¦¬ë·° í…Œì´ë¸”)
```

---

## ðŸ” 2. íŽ˜ì´ì§€ë³„ ìƒì„¸ ë¶„ì„

### 2.1 ë°©ë¬¸ìž ë¦¬ë·° ì ‘ìˆ˜ íŽ˜ì´ì§€
**íŒŒì¼**: [app/dashboard/review/visitor/page.tsx](../app/dashboard/review/visitor/page.tsx)

**âœ… êµ¬í˜„ ì™„ë£Œ**:
- âœ… ì—…ì²´ëª… ìž…ë ¥
- âœ… í”Œë ˆì´ìŠ¤ ë§í¬ ìž…ë ¥ + MID ìžë™ ì¶”ì¶œ
- âœ… ì¼ ë°œí–‰ìˆ˜ëŸ‰ ì„ íƒ (1~10ê±´)
- âœ… ì´ ìž‘ì—…ì¼ ìž…ë ¥
- âœ… ì´ ìž‘ì—…ìˆ˜ëŸ‰ ìžë™ ê³„ì‚°
- âœ… ì‚¬ì§„ ì˜µì…˜ (ì‚¬ì§„ ìžˆìŒ/ì—†ìŒ)
- âœ… ì›ê³  ì˜µì…˜ (ì§€ì •ì›ê³ /AI ì œìž‘)
- âœ… ê°€ì´ë“œ ë° ìš”ì²­ì‚¬í•­ ìž…ë ¥ (Textarea)
- âœ… ì²¨ë¶€íŒŒì¼ ì—…ë¡œë“œ (JPG, PNG, PDF)
- âœ… ì´ ë¹„ìš© ì‹¤ì‹œê°„ ê³„ì‚°
- âœ… UI ì™„ì„±ë„ ë†’ìŒ (ì¹´ë“œ ë ˆì´ì•„ì›ƒ, ë°˜ì‘í˜•)

**âš ï¸ TODO**:
```typescript
// Line 107-108: API í˜¸ì¶œ ë¶€ë¶„
// TODO: API í˜¸ì¶œ ë° íŒŒì¼ ì—…ë¡œë“œ
console.log('ì ‘ìˆ˜ ë°ì´í„°:', formData);
```

**ðŸ“Œ í•„ìš”í•œ ìž‘ì—…**:
1. ì‹¤ì œ API ì—°ê²°
2. íŒŒì¼ ì—…ë¡œë“œ êµ¬í˜„
3. ê°€ê²© ì •ë³´ DBì—ì„œ ê°€ì ¸ì˜¤ê¸° (í˜„ìž¬ í•˜ë“œì½”ë”©: 5000)

---

### 2.2 ë°©ë¬¸ìž ë¦¬ë·° í˜„í™© íŽ˜ì´ì§€
**íŒŒì¼**: [app/dashboard/review/visitor/status/page.tsx](../app/dashboard/review/visitor/status/page.tsx)

**âœ… êµ¬í˜„ ì™„ë£Œ**:
- âœ… ì ‘ìˆ˜ ë‚´ì—­ ë¦¬ìŠ¤íŠ¸ (í…Œì´ë¸” + ëª¨ë°”ì¼ ì¹´ë“œ)
- âœ… ìƒíƒœ í•„í„° (ì „ì²´/í™•ì¸ì¤‘/êµ¬ë™ì¤‘/ì™„ë£Œ/ì¤‘ë‹¨ë¨)
- âœ… ê²€ìƒ‰ ê¸°ëŠ¥ (ì—…ì²´ëª…)
- âœ… ì •ë ¬ (ì ‘ìˆ˜ì¼ìˆœ/ë¹„ìš©ìˆœ)
- âœ… í†µê³„ ì¹´ë“œ (ì´ ì ‘ìˆ˜/ì§„í–‰ì¤‘/ì™„ë£Œ/ì´ ë¹„ìš©)
- âœ… ì§„í–‰ë¥  í‘œì‹œ (progress bar)
- âœ… ì¤‘ë‹¨ í™•ì¸ ë‹¤ì´ì–¼ë¡œê·¸ (ë™ì˜ ì²´í¬ë°•ìŠ¤)
- âœ… ë¦¬í¬íŠ¸ ë‹¤ìš´ë¡œë“œ ë²„íŠ¼
- âœ… ìƒíƒœ ë°°ì§€ (ìƒ‰ìƒ êµ¬ë¶„)
- âœ… MID í‘œì‹œ

**âš ï¸ TODO**:
```typescript
// Line 93: API ì—°ê²° í•„ìš”
const response = await fetch('/api/submissions/receipt');

// Line 141: ì¤‘ë‹¨ API í˜¸ì¶œ í•„ìš”
// TODO: ì¤‘ë‹¨ API í˜¸ì¶œ

// Line 155: ë¦¬í¬íŠ¸ ë‹¤ìš´ë¡œë“œ API í•„ìš”
// TODO: ë¦¬í¬íŠ¸ ë‹¤ìš´ë¡œë“œ API
```

**ðŸ“Œ í•„ìš”í•œ ìž‘ì—…**:
1. GET API êµ¬í˜„ (í´ë¼ì´ì–¸íŠ¸ë³„ ì ‘ìˆ˜ ëª©ë¡)
2. PUT/PATCH API êµ¬í˜„ (ì¤‘ë‹¨ ìš”ì²­)
3. ë¦¬í¬íŠ¸ ë‹¤ìš´ë¡œë“œ API êµ¬í˜„

---

### 2.3 Kë§µ ë¦¬ë·° ì ‘ìˆ˜ íŽ˜ì´ì§€
**íŒŒì¼**: [app/dashboard/review/kmap/page.tsx](../app/dashboard/review/kmap/page.tsx)

**âœ… êµ¬í˜„ ì™„ë£Œ**:
- âœ… ì—…ì²´ëª… ìž…ë ¥
- âœ… ì¹´ì¹´ì˜¤ë§µ ë§í¬ ìž…ë ¥
- âœ… ì¼ ë°œí–‰ìˆ˜ëŸ‰ (ìµœì†Œ 1ê±´, MAX ì œí•œ ì—†ìŒ)
- âœ… ì´ ìž‘ì—…ì¼ ìž…ë ¥
- âœ… ì´ ìž‘ì—…ìˆ˜ëŸ‰ ìžë™ ê³„ì‚°
- âœ… ì‚¬ì§„ í¬í•¨ ì²´í¬ë°•ìŠ¤
- âœ… ì‚¬ì§„ ë¹„ìœ¨ ìŠ¬ë¼ì´ë” (10%~100%) - **ì‚¬ì§„ í¬í•¨ ì‹œì—ë§Œ í‘œì‹œ**
- âœ… ì›ê³  ì˜µì…˜ (ì§€ì •ì›ê³ /AI ì œìž‘)
- âœ… ë³„ì  ì„ íƒ (4~5ì  ì„žì–´ì„œ/5ì ëŒ€ë§Œ/4ì ëŒ€ë§Œ)
- âœ… ê°€ì´ë“œ ë° ìš”ì²­ì‚¬í•­ ìž…ë ¥
- âœ… ì˜µì…˜ë³„ ê°€ê²© ê³„ì‚° (ì‚¬ì§„ +50%, AI +30%)
- âœ… ì˜µì…˜ ì •ë³´ ì¹´ë“œ í‘œì‹œ

**âš ï¸ TODO**:
```typescript
// Line 82-83: API í˜¸ì¶œ ë¶€ë¶„
// TODO: API í˜¸ì¶œ
console.log('ì ‘ìˆ˜ ë°ì´í„°:', formData);
```

**ðŸ“Œ í•„ìš”í•œ ìž‘ì—…**:
1. ì‹¤ì œ API ì—°ê²°
2. ê°€ê²© ì •ë³´ DBì—ì„œ ê°€ì ¸ì˜¤ê¸° (í˜„ìž¬ í•˜ë“œì½”ë”©: 3000)

---

### 2.4 Kë§µ ë¦¬ë·° í˜„í™© íŽ˜ì´ì§€ â­ **íŠ¹ìˆ˜ ê¸°ëŠ¥ í¬í•¨**
**íŒŒì¼**: [app/dashboard/review/kmap/status/page.tsx](../app/dashboard/review/kmap/status/page.tsx)

**âœ… êµ¬í˜„ ì™„ë£Œ (ê¸°ë³¸)**:
- âœ… ì ‘ìˆ˜ ë‚´ì—­ ë¦¬ìŠ¤íŠ¸
- âœ… ìƒíƒœ í•„í„° (7ê°€ì§€ ìƒíƒœ)
- âœ… ê²€ìƒ‰/ì •ë ¬ ê¸°ëŠ¥
- âœ… í†µê³„ ì¹´ë“œ
- âœ… ì§„í–‰ë¥  í‘œì‹œ
- âœ… ì¤‘ë‹¨ í™•ì¸ ë‹¤ì´ì–¼ë¡œê·¸

**âœ… êµ¬í˜„ ì™„ë£Œ (íŠ¹ìˆ˜ ê¸°ëŠ¥)** - ðŸŽ¯ **ìš”êµ¬ì‚¬í•­ ì •í™•ížˆ êµ¬í˜„ë¨!**:

#### 1) ì›ê³  ë° ì´ë¯¸ì§€ ê²€ìˆ˜ ë‹¤ì´ì–¼ë¡œê·¸ (Line 592-696)
```typescript
âœ… ì—…ë¡œë“œëœ ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° (ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒ)
âœ… ì´ë¯¸ì§€ë³„ ìŠ¹ì¸ ìƒíƒœ í‘œì‹œ
âœ… ë¦¬ë·° ì›ê³  ë¯¸ë¦¬ë³´ê¸°
âœ… "ê²€ìˆ˜ ì™„ë£Œ" ë²„íŠ¼ â†’ "êµ¬ë™ì´ ì‹œìž‘ë©ë‹ˆë‹¤" íŒì—…
âœ… "ìˆ˜ì • ìš”ì²­" ë²„íŠ¼ + ìž¥ë¬¸ í…ìŠ¤íŠ¸ ìž…ë ¥
âœ… ìˆ˜ì • ìš”ì²­ ë©”ëª¨ ì „ì†¡
```

#### 2) 1:1 ë¬¸ì˜ ë©”ì‹œì§€ ë‹¤ì´ì–¼ë¡œê·¸ (Line 698-765) â­
```typescript
âœ… ì™•ë³µ ë©”ì‹œì§€ ížˆìŠ¤í† ë¦¬ í‘œì‹œ
âœ… ë°œì‹ ìž êµ¬ë¶„ (ê´€ë¦¬ìž/í´ë¼ì´ì–¸íŠ¸)
âœ… ë©”ì‹œì§€ ë§í’ì„  (ì˜¤ë¥¸ìª½/ì™¼ìª½ ì •ë ¬)
âœ… ìƒˆ ë©”ì‹œì§€ ìž…ë ¥ (Textarea)
âœ… ì „ì†¡ ë²„íŠ¼
âœ… Enter í‚¤ë¡œ ì „ì†¡ (Shift+EnterëŠ” ì¤„ë°”ê¿ˆ)
âœ… ë©”ì‹œì§€ ì‹œê°„ í‘œì‹œ
```

#### 3) ìƒíƒœ ê´€ë¦¬ (7ê°€ì§€ ìƒíƒœ)
```typescript
pending: 'í™•ì¸ì¤‘'
waiting_content: 'ì›ê³ /ì´ë¯¸ì§€ ë“±ë¡ ëŒ€ê¸°'
review: 'ê²€ìˆ˜ ì¤‘'
revision_requested: 'ìˆ˜ì • ìš”ì²­ë¨'
in_progress: 'êµ¬ë™ì¤‘'
completed: 'ì™„ë£Œ'
cancelled: 'ì¤‘ë‹¨ë¨'
```

**âš ï¸ TODO**:
```typescript
// Line 120-124: API ì—°ê²° í•„ìš”
// TODO: ì‹¤ì œ API ì—°ê²°
setSubmissions([]);

// Line 155-170: ê²€ìˆ˜ ìŠ¹ì¸/ìˆ˜ì • ìš”ì²­ API í•„ìš”
// TODO: API í˜¸ì¶œë¡œ ê²€ìˆ˜ ìŠ¹ì¸
// TODO: API í˜¸ì¶œë¡œ ìˆ˜ì • ìš”ì²­

// Line 180-193: ë©”ì‹œì§€ ì „ì†¡ API í•„ìš”
// TODO: API í˜¸ì¶œë¡œ ë©”ì‹œì§€ ì „ì†¡
```

**ðŸ“Œ í•„ìš”í•œ ìž‘ì—…**:
1. GET API êµ¬í˜„ (Kë§µ ë¦¬ë·° ëª©ë¡)
2. PUT/PATCH API êµ¬í˜„ (ê²€ìˆ˜ ìŠ¹ì¸)
3. POST API êµ¬í˜„ (ìˆ˜ì • ìš”ì²­)
4. POST API êµ¬í˜„ (ë©”ì‹œì§€ ì „ì†¡)
5. GET API êµ¬í˜„ (ë©”ì‹œì§€ ì¡°íšŒ)

---

## ðŸ—„ 3. ë°ì´í„°ë² ì´ìŠ¤ ë¶„ì„

### 3.1 receipt_review_submissions (ë°©ë¬¸ìž ë¦¬ë·°)
**ìŠ¤í‚¤ë§ˆ**: [supabase/schema.sql:86-105](../supabase/schema.sql)

```sql
CREATE TABLE receipt_review_submissions (
  id UUID PRIMARY KEY,
  client_id UUID REFERENCES clients(id),
  company_name VARCHAR(200) NOT NULL,
  place_url TEXT NOT NULL,
  daily_count INTEGER NOT NULL,
  total_count INTEGER NOT NULL CHECK (total_count >= 30),
  has_photo BOOLEAN DEFAULT false,
  has_script BOOLEAN DEFAULT false,
  guide_text TEXT,
  business_license_url TEXT,
  sample_receipt_url TEXT,
  photo_urls TEXT[],  -- ðŸ“¸ ë°°ì—´ íƒ€ìž…
  total_points INTEGER NOT NULL,
  status VARCHAR(20) DEFAULT 'pending',
  start_date DATE,
  notes TEXT,
  created_at TIMESTAMP,
  updated_at TIMESTAMP
);
```

**âœ… ì¡´ìž¬í•˜ëŠ” í•„ë“œ**:
- âœ… ëª¨ë“  ê¸°ë³¸ í•„ë“œ ì¡´ìž¬
- âœ… íŒŒì¼ URL í•„ë“œ ì¡´ìž¬ (business_license_url, photo_urls)
- âœ… ìƒíƒœ ê´€ë¦¬ (status)

**âŒ ë¶€ì¡±í•œ í•„ë“œ** (ìš”êµ¬ì‚¬í•­ ê¸°ì¤€):
ì—†ìŒ - ê¸°ë³¸ ìš”êµ¬ì‚¬í•­ì€ ëª¨ë‘ ì¶©ì¡±

---

### 3.2 kakaomap_review_submissions (Kë§µ ë¦¬ë·°)
**ìŠ¤í‚¤ë§ˆ**: [supabase/schema.sql:110-129](../supabase/schema.sql)

```sql
CREATE TABLE kakaomap_review_submissions (
  id UUID PRIMARY KEY,
  client_id UUID REFERENCES clients(id),
  company_name VARCHAR(200) NOT NULL,
  kakaomap_url TEXT NOT NULL,
  daily_count INTEGER NOT NULL,
  total_count INTEGER NOT NULL CHECK (total_count >= 10),
  has_photo BOOLEAN DEFAULT false,
  text_review_count INTEGER DEFAULT 0,
  photo_review_count INTEGER DEFAULT 0,
  photo_urls TEXT[],       -- ðŸ“¸ ì´ë¯¸ì§€ URL ë°°ì—´
  script_urls TEXT[],      -- ðŸ“ ì›ê³  URL ë°°ì—´
  total_points INTEGER NOT NULL,
  status VARCHAR(20) DEFAULT 'pending',
  script_confirmed BOOLEAN DEFAULT false,  -- ì›ê³  í™•ì¸ ì—¬ë¶€
  start_date DATE,
  notes TEXT,
  created_at TIMESTAMP,
  updated_at TIMESTAMP
);
```

**âœ… ì¡´ìž¬í•˜ëŠ” í•„ë“œ**:
- âœ… ê¸°ë³¸ í•„ë“œ ì¡´ìž¬
- âœ… ì´ë¯¸ì§€/ì›ê³  URL ë°°ì—´
- âœ… ì›ê³  í™•ì¸ ì—¬ë¶€ (script_confirmed)

**âŒ ë¶€ì¡±í•œ í•„ë“œ** (ìš”êµ¬ì‚¬í•­ ê¸°ì¤€):
```sql
-- 1. ì´ë¯¸ì§€ë³„ ìƒì„¸ ì •ë³´ (ìŠ¹ì¸ ì—¬ë¶€, ìˆ˜ì • ìš”ì²­ ë©”ëª¨)
-- í˜„ìž¬: photo_urls TEXT[]
-- í•„ìš”: ë³„ë„ í…Œì´ë¸” ë˜ëŠ” JSONB

-- 2. ìˆ˜ì • ìš”ì²­ ížˆìŠ¤í† ë¦¬
-- í˜„ìž¬: ì—†ìŒ
-- í•„ìš”: ë³„ë„ í…Œì´ë¸” (kakaomap_revision_requests)

-- 3. 1:1 ë¬¸ì˜ ë©”ì‹œì§€
-- í˜„ìž¬: ì—†ìŒ
-- í•„ìš”: ë³„ë„ í…Œì´ë¸” (kakaomap_messages)

-- 4. ìƒíƒœ ì„¸ë¶„í™”
-- í˜„ìž¬: status VARCHAR(20)
-- í•„ìš”: 7ê°€ì§€ ìƒíƒœ ì§€ì› (pending, waiting_content, review, revision_requested, in_progress, completed, cancelled)

-- 5. ì‚¬ì§„ ë¹„ìœ¨, ë³„ì  ì˜µì…˜, ì›ê³  íƒ€ìž…
-- í˜„ìž¬: ì—†ìŒ
-- í•„ìš”: photo_ratio INTEGER, star_rating VARCHAR(20), script_type VARCHAR(20)
```

---

## ðŸ”§ 4. API ë¶„ì„

### 4.1 ë°©ë¬¸ìž ë¦¬ë·° API
**íŒŒì¼**: [app/api/submissions/receipt/route.ts](../app/api/submissions/receipt/route.ts)

**âœ… POST êµ¬í˜„ë¨**:
```typescript
âœ… í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ (requireAuth)
âœ… í•„ìˆ˜ í•­ëª© ê²€ì¦
âœ… ìµœì†Œ ìˆ˜ëŸ‰ ê²€ì¦ (30íƒ€)
âœ… í¬ì¸íŠ¸ í™•ì¸ ë° ì°¨ê°
âœ… ê°€ê²© ê²€ì¦ (getProductPrice)
âœ… ì ‘ìˆ˜ ìƒì„± (Supabase insert)
âœ… í¬ì¸íŠ¸ ê±°ëž˜ ê¸°ë¡ ìƒì„±
âœ… ë¡¤ë°± ì²˜ë¦¬ (ì—ëŸ¬ ì‹œ)
âœ… ìºì‹œ ë¬´íš¨í™” (revalidatePath)
```

**âŒ ë¯¸êµ¬í˜„ API**:
```
âŒ GET /api/submissions/receipt (ì ‘ìˆ˜ ëª©ë¡ ì¡°íšŒ)
âŒ GET /api/submissions/receipt/[id] (ì ‘ìˆ˜ ìƒì„¸ ì¡°íšŒ)
âŒ PUT /api/submissions/receipt/[id]/cancel (ì¤‘ë‹¨ ìš”ì²­)
âŒ GET /api/reports/receipt/[id] (ë¦¬í¬íŠ¸ ë‹¤ìš´ë¡œë“œ)
```

---

### 4.2 Kë§µ ë¦¬ë·° API
**íŒŒì¼**: [app/api/submissions/kakaomap/route.ts](../app/api/submissions/kakaomap/route.ts)

**âœ… POST êµ¬í˜„ë¨**:
```typescript
âœ… í´ë¼ì´ì–¸íŠ¸ ì¸ì¦
âœ… í•„ìˆ˜ í•­ëª© ê²€ì¦
âœ… ìµœì†Œ ìˆ˜ëŸ‰ ê²€ì¦ (10íƒ€)
âœ… í¬ì¸íŠ¸ í™•ì¸ ë° ì°¨ê°
âœ… ê°€ê²© ê²€ì¦
âœ… ì ‘ìˆ˜ ìƒì„±
âœ… í¬ì¸íŠ¸ ê±°ëž˜ ê¸°ë¡ ìƒì„±
âœ… ë¡¤ë°± ì²˜ë¦¬
âœ… ìºì‹œ ë¬´íš¨í™”
```

**âŒ ë¯¸êµ¬í˜„ API** (íŠ¹ìˆ˜ ê¸°ëŠ¥ í•„ìš”):
```
âŒ GET /api/submissions/kakaomap (ì ‘ìˆ˜ ëª©ë¡ ì¡°íšŒ)
âŒ GET /api/submissions/kakaomap/[id] (ì ‘ìˆ˜ ìƒì„¸ ì¡°íšŒ)
âŒ PUT /api/submissions/kakaomap/[id]/cancel (ì¤‘ë‹¨ ìš”ì²­)

âŒ POST /api/admin/kakaomap/[id]/upload-content (ì´ë¯¸ì§€/ì›ê³  ì—…ë¡œë“œ)
âŒ PUT /api/admin/kakaomap/[id]/approve (ê²€ìˆ˜ ìŠ¹ì¸)
âŒ POST /api/admin/kakaomap/[id]/request-revision (ìˆ˜ì • ìš”ì²­)

âŒ GET /api/kakaomap/[id]/messages (ë©”ì‹œì§€ ì¡°íšŒ)
âŒ POST /api/kakaomap/[id]/messages (ë©”ì‹œì§€ ì „ì†¡)
```

---

## âš ï¸ 5. ë¯¸êµ¬í˜„ ê¸°ëŠ¥ ì •ë¦¬

### 5.1 ë°©ë¬¸ìž ë¦¬ë·° ë¯¸êµ¬í˜„ (ìš°ì„ ìˆœìœ„ ìˆœ)

#### ðŸ”´ HIGH ìš°ì„ ìˆœìœ„
```
1. ì ‘ìˆ˜ í¼ â†’ API ì—°ê²°
   - íŒŒì¼ ì—…ë¡œë“œ êµ¬í˜„
   - API í˜¸ì¶œ ì—°ê²°

2. í˜„í™© íŽ˜ì´ì§€ â†’ GET API êµ¬í˜„
   - ì ‘ìˆ˜ ëª©ë¡ ì¡°íšŒ API
   - ì‹¤ì‹œê°„ ë°ì´í„° ì—°ë™

3. ì¤‘ë‹¨ ê¸°ëŠ¥ â†’ PUT API êµ¬í˜„
   - ì¤‘ë‹¨ ìš”ì²­ API
   - í¬ì¸íŠ¸ í™˜ë¶ˆ ë¡œì§
```

#### ðŸŸ¡ MEDIUM ìš°ì„ ìˆœìœ„
```
4. ë¦¬í¬íŠ¸ ë‹¤ìš´ë¡œë“œ API
   - ê´€ë¦¬ìžê°€ ì—…ë¡œë“œí•œ ë¦¬í¬íŠ¸ ë‹¤ìš´ë¡œë“œ

5. ê°€ê²© ë™ì  ë¡œë”©
   - DBì—ì„œ ì‹¤ì‹œê°„ ê°€ê²© ê°€ì ¸ì˜¤ê¸°
```

---

### 5.2 Kë§µ ë¦¬ë·° ë¯¸êµ¬í˜„ (ìš°ì„ ìˆœìœ„ ìˆœ)

#### ðŸ”´ HIGH ìš°ì„ ìˆœìœ„
```
1. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ í™•ìž¥ â­
   - kakaomap_content_items (ì´ë¯¸ì§€/ì›ê³  ìƒì„¸)
   - kakaomap_revision_requests (ìˆ˜ì • ìš”ì²­ ê¸°ë¡)
   - kakaomap_messages (1:1 ë¬¸ì˜)
   - kakaomap_review_submissions í•„ë“œ ì¶”ê°€

2. ì ‘ìˆ˜ í¼ â†’ API ì—°ê²°
   - API í˜¸ì¶œ ì—°ê²°
   - ì˜µì…˜ ë°ì´í„° ì €ìž¥

3. í˜„í™© íŽ˜ì´ì§€ â†’ GET API êµ¬í˜„
   - ì ‘ìˆ˜ ëª©ë¡ ì¡°íšŒ API
   - ì‹¤ì‹œê°„ ë°ì´í„° ì—°ë™

4. ê´€ë¦¬ìž íŽ˜ì´ì§€ êµ¬í˜„ â­ **í•µì‹¬!**
   - ì›ê³ /ì´ë¯¸ì§€ ì—…ë¡œë“œ íŽ˜ì´ì§€
   - ë“±ë¡ëœ ì½˜í…ì¸  ê´€ë¦¬ íŽ˜ì´ì§€
```

#### ðŸŸ¡ MEDIUM ìš°ì„ ìˆœìœ„
```
5. ê²€ìˆ˜ ê¸°ëŠ¥ API
   - ê²€ìˆ˜ ìŠ¹ì¸ API
   - ìˆ˜ì • ìš”ì²­ API
   - ìˆ˜ì • ìš”ì²­ ížˆìŠ¤í† ë¦¬ ì¡°íšŒ

6. 1:1 ë¬¸ì˜ ê¸°ëŠ¥ API
   - ë©”ì‹œì§€ ì¡°íšŒ API
   - ë©”ì‹œì§€ ì „ì†¡ API
   - ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ (ì„ íƒ)

7. ì¤‘ë‹¨ ê¸°ëŠ¥ â†’ PUT API êµ¬í˜„
   - ì¤‘ë‹¨ ìš”ì²­ API
   - í¬ì¸íŠ¸ í™˜ë¶ˆ ë¡œì§
```

---

## ðŸ— 6. ë°ì´í„°ë² ì´ìŠ¤ í™•ìž¥ ì„¤ê³„

### 6.1 kakaomap_content_items (ì´ë¯¸ì§€/ì›ê³  ìƒì„¸)
```sql
CREATE TABLE kakaomap_content_items (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  submission_id UUID REFERENCES kakaomap_review_submissions(id) ON DELETE CASCADE,
  content_type VARCHAR(20) NOT NULL, -- 'image' | 'script'
  url TEXT NOT NULL,
  file_name VARCHAR(255),
  approved BOOLEAN DEFAULT false,
  revision_note TEXT,
  uploaded_by UUID REFERENCES admins(id),
  uploaded_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

CREATE INDEX idx_kakaomap_content_submission ON kakaomap_content_items(submission_id);
CREATE INDEX idx_kakaomap_content_type ON kakaomap_content_items(content_type);
```

### 6.2 kakaomap_revision_requests (ìˆ˜ì • ìš”ì²­ ê¸°ë¡)
```sql
CREATE TABLE kakaomap_revision_requests (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  submission_id UUID REFERENCES kakaomap_review_submissions(id) ON DELETE CASCADE,
  requested_by UUID REFERENCES clients(id),
  request_type VARCHAR(20) NOT NULL, -- 'initial' | 'revision'
  notes TEXT NOT NULL,
  status VARCHAR(20) DEFAULT 'pending', -- 'pending' | 'resolved'
  resolved_at TIMESTAMP WITH TIME ZONE,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

CREATE INDEX idx_kakaomap_revision_submission ON kakaomap_revision_requests(submission_id);
CREATE INDEX idx_kakaomap_revision_status ON kakaomap_revision_requests(status);
```

### 6.3 kakaomap_messages (1:1 ë¬¸ì˜)
```sql
CREATE TABLE kakaomap_messages (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  submission_id UUID REFERENCES kakaomap_review_submissions(id) ON DELETE CASCADE,
  sender_type VARCHAR(20) NOT NULL, -- 'admin' | 'client'
  sender_id UUID NOT NULL,
  sender_name VARCHAR(100) NOT NULL,
  content TEXT NOT NULL,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

CREATE INDEX idx_kakaomap_messages_submission ON kakaomap_messages(submission_id);
CREATE INDEX idx_kakaomap_messages_created ON kakaomap_messages(created_at);
```

### 6.4 kakaomap_review_submissions í•„ë“œ ì¶”ê°€
```sql
ALTER TABLE kakaomap_review_submissions
ADD COLUMN photo_ratio INTEGER DEFAULT 50 CHECK (photo_ratio >= 10 AND photo_ratio <= 100),
ADD COLUMN star_rating VARCHAR(20) DEFAULT 'mixed', -- 'mixed' | 'five' | 'four'
ADD COLUMN script_type VARCHAR(20) DEFAULT 'custom'; -- 'custom' | 'ai'

-- status ê°’ í™•ìž¥ (ê¸°ì¡´ VARCHAR(20) ìœ ì§€, ê°’ë§Œ ì¶”ê°€)
-- 'pending', 'waiting_content', 'review', 'revision_requested', 'in_progress', 'completed', 'cancelled'
```

---

## ðŸ“‹ 7. ê´€ë¦¬ìž íŽ˜ì´ì§€ í•„ìš” ê¸°ëŠ¥

### 7.1 ë°©ë¬¸ìž ë¦¬ë·° ê´€ë¦¬ìž íŽ˜ì´ì§€
**í•„ìš” ì—†ìŒ** - ê¸°ë³¸ ì ‘ìˆ˜ ê´€ë¦¬ë§Œ í•„ìš”

### 7.2 Kë§µ ë¦¬ë·° ê´€ë¦¬ìž íŽ˜ì´ì§€ â­ **í•„ìˆ˜!**

#### 7.2.1 íŽ˜ì´ì§€ êµ¬ì„±
```
/admin/kakaomap-reviews (ëª©ë¡)
/admin/kakaomap-reviews/[id] (ìƒì„¸ + ì›ê³ /ì´ë¯¸ì§€ ì—…ë¡œë“œ)
```

#### 7.2.2 í•„ìš” ê¸°ëŠ¥
```
1. ì ‘ìˆ˜ ëª©ë¡ ì¡°íšŒ
   - ëª¨ë“  Kë§µ ë¦¬ë·° ì ‘ìˆ˜ ë¦¬ìŠ¤íŠ¸
   - ìƒíƒœë³„ í•„í„°ë§

2. ì›ê³ /ì´ë¯¸ì§€ ì—…ë¡œë“œ íŽ˜ì´ì§€ (ìƒì„¸ íŽ˜ì´ì§€)
   - ì´ë¯¸ì§€ ë‹¤ì¤‘ ì—…ë¡œë“œ
   - ì›ê³  í…ìŠ¤íŠ¸ ìž…ë ¥
   - ì—…ë¡œë“œ ì™„ë£Œ í›„ ìƒíƒœ ë³€ê²½: 'waiting_content' â†’ 'review'

3. ê²€ìˆ˜ ìŠ¹ì¸/ê±°ë¶€
   - í´ë¼ì´ì–¸íŠ¸ê°€ ê²€ìˆ˜ ì™„ë£Œ ë²„íŠ¼ í´ë¦­
   - ê´€ë¦¬ìžê°€ ìµœì¢… ìŠ¹ì¸
   - ìƒíƒœ ë³€ê²½: 'review' â†’ 'in_progress'

4. ìˆ˜ì • ìš”ì²­ ì²˜ë¦¬
   - í´ë¼ì´ì–¸íŠ¸ê°€ ìˆ˜ì • ìš”ì²­ ë©”ì‹œì§€ ìž‘ì„±
   - ê´€ë¦¬ìžê°€ ìˆ˜ì • ìš”ì²­ í™•ì¸
   - ìƒíƒœ ë³€ê²½: 'review' â†’ 'revision_requested'
   - ìž¬ì—…ë¡œë“œ í›„: 'revision_requested' â†’ 'review'

5. 1:1 ë¬¸ì˜ ê´€ë¦¬
   - ë©”ì‹œì§€ ížˆìŠ¤í† ë¦¬ ì¡°íšŒ
   - ê´€ë¦¬ìž ë‹µë³€ ìž‘ì„±
```

---

## ðŸŽ¯ 8. êµ¬í˜„ ìš°ì„ ìˆœìœ„ (ì „ì²´)

### Phase 1: ê¸°ë³¸ ë™ìž‘ êµ¬í˜„ (1-2ì¼)
```
1. ë°©ë¬¸ìž ë¦¬ë·° ì ‘ìˆ˜ API ì—°ê²°
   - íŒŒì¼ ì—…ë¡œë“œ (/api/upload)
   - ì ‘ìˆ˜ í¼ ì—°ê²°

2. ë°©ë¬¸ìž ë¦¬ë·° í˜„í™© API
   - GET /api/submissions/receipt

3. Kë§µ ë¦¬ë·° ì ‘ìˆ˜ API ì—°ê²°
   - ì ‘ìˆ˜ í¼ ì—°ê²°
   - ì˜µì…˜ ë°ì´í„° ì €ìž¥

4. Kë§µ ë¦¬ë·° í˜„í™© API
   - GET /api/submissions/kakaomap
```

### Phase 2: Kë§µ íŠ¹ìˆ˜ ê¸°ëŠ¥ (2-3ì¼)
```
5. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ í™•ìž¥
   - Migration íŒŒì¼ ìž‘ì„±
   - 3ê°œ í…Œì´ë¸” ìƒì„±
   - kakaomap_review_submissions í•„ë“œ ì¶”ê°€

6. ê´€ë¦¬ìž íŽ˜ì´ì§€ - Kë§µ ë¦¬ë·° ê´€ë¦¬
   - /admin/kakaomap-reviews ëª©ë¡
   - /admin/kakaomap-reviews/[id] ìƒì„¸

7. ì›ê³ /ì´ë¯¸ì§€ ì—…ë¡œë“œ ê¸°ëŠ¥
   - POST /api/admin/kakaomap/[id]/upload-content
   - ì´ë¯¸ì§€ ë‹¤ì¤‘ ì—…ë¡œë“œ UI
   - ì›ê³  í…ìŠ¤íŠ¸ ìž…ë ¥ UI

8. ê²€ìˆ˜ ê¸°ëŠ¥
   - PUT /api/admin/kakaomap/[id]/approve
   - POST /api/admin/kakaomap/[id]/request-revision
   - í´ë¼ì´ì–¸íŠ¸ ê²€ìˆ˜ í™•ì¸ UI (ì´ë¯¸ ìžˆìŒ)
```

### Phase 3: ì¶”ê°€ ê¸°ëŠ¥ (1-2ì¼)
```
9. 1:1 ë¬¸ì˜ ê¸°ëŠ¥
   - GET /api/kakaomap/[id]/messages
   - POST /api/kakaomap/[id]/messages
   - ë©”ì‹œì§€ UI (ì´ë¯¸ ìžˆìŒ)

10. ì¤‘ë‹¨ ê¸°ëŠ¥
    - PUT /api/submissions/receipt/[id]/cancel
    - PUT /api/submissions/kakaomap/[id]/cancel
    - í¬ì¸íŠ¸ í™˜ë¶ˆ ë¡œì§

11. ë¦¬í¬íŠ¸ ë‹¤ìš´ë¡œë“œ
    - GET /api/reports/[type]/[id]
    - íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì²˜ë¦¬
```

---

## ðŸ’¡ 9. í•µì‹¬ ë°œê²¬ì‚¬í•­

### âœ… ì¢‹ì€ ì 
```
1. UIëŠ” 90% ì™„ì„±ë¨ - ë§¤ìš° ì™„ì„±ë„ ë†’ìŒ
2. Kë§µ ë¦¬ë·° status íŽ˜ì´ì§€ì— íŠ¹ìˆ˜ ê¸°ëŠ¥ UIê°€ ì´ë¯¸ êµ¬í˜„ë˜ì–´ ìžˆìŒ!
   - ì›ê³ /ì´ë¯¸ì§€ ê²€ìˆ˜ ë‹¤ì´ì–¼ë¡œê·¸
   - 1:1 ë¬¸ì˜ ë©”ì‹œì§€ ë‹¤ì´ì–¼ë¡œê·¸
3. ê¸°ë³¸ API êµ¬ì¡° ìž˜ ìž¡í˜€ ìžˆìŒ (ì¸ì¦, ê²€ì¦, ë¡¤ë°±)
4. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ê¸°ë³¸ êµ¬ì¡° ì¡´ìž¬
```

### âš ï¸ ì£¼ì˜ì‚¬í•­
```
1. Kë§µ ë¦¬ë·°ëŠ” DB ìŠ¤í‚¤ë§ˆ í™•ìž¥ í•„ìˆ˜
   - ì´ë¯¸ì§€/ì›ê³  ìƒì„¸ ì •ë³´
   - ìˆ˜ì • ìš”ì²­ ížˆìŠ¤í† ë¦¬
   - 1:1 ë¬¸ì˜ ë©”ì‹œì§€

2. ê´€ë¦¬ìž íŽ˜ì´ì§€ ë¯¸êµ¬í˜„ (Kë§µ ë¦¬ë·°)
   - ì›ê³ /ì´ë¯¸ì§€ ì—…ë¡œë“œ íŽ˜ì´ì§€ í•„ìš”
   - ê²€ìˆ˜ ìŠ¹ì¸/ê±°ë¶€ UI í•„ìš”

3. API ëŒ€ë¶€ë¶„ ë¯¸ì—°ê²°
   - POSTëŠ” ìžˆì§€ë§Œ GET, PUT í•„ìš”
```

### ðŸŽ¯ í•µì‹¬ ìž‘ì—…
```
1. DB ìŠ¤í‚¤ë§ˆ í™•ìž¥ (Kë§µ ë¦¬ë·°)
2. ê´€ë¦¬ìž íŽ˜ì´ì§€ êµ¬í˜„ (Kë§µ ë¦¬ë·°)
3. API ì—°ê²° (ëª¨ë“  íŽ˜ì´ì§€)
4. íŠ¹ìˆ˜ ê¸°ëŠ¥ API (ê²€ìˆ˜, ë©”ì‹œì§€)
```

---

## ðŸ“Š 10. ì§„í–‰ë„ (Percentage)

### ì „ì²´ ì§„í–‰ë„: **60%**

```
UI/UX:           90% â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘
ë°ì´í„°ë² ì´ìŠ¤:    70% â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘
API:             40% â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘
ê´€ë¦¬ìž íŽ˜ì´ì§€:   0%  â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘
íŠ¹ìˆ˜ ê¸°ëŠ¥:       30% â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘
```

### ê¸°ëŠ¥ë³„ ì§„í–‰ë„

**ë°©ë¬¸ìž ë¦¬ë·°**: **70%**
```
âœ… UI: 100%
âœ… DB: 100%
âš ï¸ API: 50% (POSTë§Œ ìžˆìŒ, GET/PUT í•„ìš”)
âš ï¸ íŒŒì¼ ì—…ë¡œë“œ: 0%
```

**Kë§µ ë¦¬ë·°**: **50%**
```
âœ… UI: 100%
âš ï¸ DB: 60% (ê¸°ë³¸ë§Œ ìžˆìŒ, í™•ìž¥ í•„ìš”)
âš ï¸ API: 30% (POSTë§Œ ìžˆìŒ, íŠ¹ìˆ˜ API í•„ìš”)
âŒ ê´€ë¦¬ìž íŽ˜ì´ì§€: 0%
âš ï¸ íŠ¹ìˆ˜ ê¸°ëŠ¥: 30% (UIë§Œ ìžˆìŒ, API í•„ìš”)
```

---

## ðŸš€ 11. ë‹¤ìŒ ë‹¨ê³„ ê¶Œìž¥ì‚¬í•­

### ì¦‰ì‹œ ì‹œìž‘ ê°€ëŠ¥
```
1. ë°©ë¬¸ìž ë¦¬ë·° ì™„ì„±í•˜ê¸° (1ì¼)
   - íŒŒì¼ ì—…ë¡œë“œ êµ¬í˜„
   - GET API êµ¬í˜„
   - API ì—°ê²°

â†’ ì´ê±¸ ë¨¼ì € ì™„ì„±í•˜ë©´ Kë§µ ë¦¬ë·° ìž‘ì—… ì‹œ ì°¸ê³  ê°€ëŠ¥
```

### ìˆœì°¨ì  ì§„í–‰
```
2. Kë§µ ë¦¬ë·° DB ìŠ¤í‚¤ë§ˆ í™•ìž¥ (0.5ì¼)
   - Migration íŒŒì¼ ìž‘ì„±
   - í…Œì´ë¸” ìƒì„±

3. Kë§µ ë¦¬ë·° ê¸°ë³¸ API êµ¬í˜„ (0.5ì¼)
   - GET /api/submissions/kakaomap
   - ì ‘ìˆ˜ í¼ API ì—°ê²°

4. ê´€ë¦¬ìž íŽ˜ì´ì§€ - Kë§µ ë¦¬ë·° (1ì¼)
   - ëª©ë¡ íŽ˜ì´ì§€
   - ìƒì„¸ íŽ˜ì´ì§€ + ì—…ë¡œë“œ

5. íŠ¹ìˆ˜ ê¸°ëŠ¥ API (1ì¼)
   - ê²€ìˆ˜ ìŠ¹ì¸/ê±°ë¶€
   - 1:1 ë¬¸ì˜

6. ìµœì¢… ì—°ë™ ë° í…ŒìŠ¤íŠ¸ (0.5ì¼)
```

**ì´ ì˜ˆìƒ ê¸°ê°„**: **4-5ì¼**

---

**ë¶„ì„ ì™„ë£Œ**
**ë‹¤ìŒ ë¬¸ì„œ**: êµ¬í˜„ ê³„íš ìˆ˜ë¦½
