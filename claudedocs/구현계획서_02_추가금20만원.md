# êµ¬í˜„ ê³„íšì„œ - ì¶”ê°€ê¸ˆ 20ë§Œì› í•­ëª© (6ê±´)

## ğŸ“‹ ê°œìš”
- **ì´ í•­ëª©**: 6ê±´ (ì‹¤ì œ ì¶”ê°€ê¸ˆ ë°œìƒ)
- **ë‹¨ê°€**: ê° 20ë§Œì›
- **ì´ ë¹„ìš©**: 120ë§Œì› (6ê±´ ì„ íƒ ì‹œ)
- **ì¹´í…Œê³ ë¦¬**: ìš´ì˜ íš¨ìœ¨ ê°œì„  ê¸°ëŠ¥

---

## 1. í™˜ë¶ˆ ìŠ¹ì¸ ì›Œí¬í”Œë¡œìš° (20ë§Œì›)

### í˜„ì¬ ìƒí™©
- ê¸°ì¡´ í™˜ë¶ˆ ê·œì •: "ì¤‘ë‹¨ ë™ì˜ ì‹œ ë°”ë¡œ í™˜ë¶ˆ ì²˜ë¦¬"
- í´ë¼ì´ì–¸íŠ¸ ìš”ì²­: ê´€ë¦¬ì ìŠ¹ì¸ í›„ í™˜ë¶ˆ

### ì¶”ê°€ê¸ˆ ë°œìƒ ì´ìœ  (ë¹„ì „ë¬¸ê°€ìš©)
í˜„ì¬ëŠ” í´ë¼ì´ì–¸íŠ¸ê°€ ì¤‘ë‹¨ ìš”ì²­í•˜ë©´ ìë™ìœ¼ë¡œ í™˜ë¶ˆì´ ì²˜ë¦¬ë©ë‹ˆë‹¤. í•˜ì§€ë§Œ ìš”ì²­ì‚¬í•­ì€ ê´€ë¦¬ìê°€ ê²€í† í•˜ê³  ìŠ¹ì¸í•œ í›„ì— í™˜ë¶ˆì´ ì§„í–‰ë˜ë„ë¡ í•˜ëŠ” **ìŠ¹ì¸ ë‹¨ê³„ ì¶”ê°€**ì…ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ì„œëŠ”:
1. í™˜ë¶ˆ ìš”ì²­ ìƒíƒœ ê´€ë¦¬ (ëŒ€ê¸°/ìŠ¹ì¸/ê±°ë¶€)
2. ê´€ë¦¬ì ìŠ¹ì¸ í™”ë©´ ê°œë°œ
3. ìŠ¹ì¸/ê±°ë¶€ ì²˜ë¦¬ ë¡œì§ êµ¬í˜„
4. í´ë¼ì´ì–¸íŠ¸ ìŠ¹ì¸ ê²°ê³¼ ì•Œë¦¼ ê¸°ëŠ¥

ì´ ëª¨ë“  ê¸°ëŠ¥ì´ ìƒˆë¡œìš´ ê°œë°œì´ í•„ìš”í•˜ë¯€ë¡œ ì¶”ê°€ê¸ˆì´ ë°œìƒí•©ë‹ˆë‹¤.

---

### êµ¬í˜„ ê³„íš

#### Step 1: DB ìŠ¤í‚¤ë§ˆ ìˆ˜ì •

```sql
-- í™˜ë¶ˆ ìš”ì²­ í…Œì´ë¸” ìƒì„±
CREATE TABLE refund_requests (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  submission_id UUID NOT NULL REFERENCES place_submissions(id),
  client_id UUID NOT NULL REFERENCES clients(id),
  requested_amount INT NOT NULL,
  reason TEXT,
  status TEXT NOT NULL DEFAULT 'pending', -- 'pending', 'approved', 'rejected'
  admin_note TEXT,
  approved_by UUID REFERENCES users(id),
  approved_at TIMESTAMPTZ,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- ì¸ë±ìŠ¤ ìƒì„±
CREATE INDEX idx_refund_requests_status ON refund_requests(status);
CREATE INDEX idx_refund_requests_client ON refund_requests(client_id);
CREATE INDEX idx_refund_requests_submission ON refund_requests(submission_id);
```

#### Step 2: API ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„

**í´ë¼ì´ì–¸íŠ¸ - í™˜ë¶ˆ ìš”ì²­ API**:
```typescript
// app/api/client/refund-request/route.ts
export async function POST(request: Request) {
  const { submission_id, reason } = await request.json();
  const session = await getServerSession();

  // 1. ì ‘ìˆ˜ ì •ë³´ ì¡°íšŒ
  const { data: submission } = await supabase
    .from('place_submissions')
    .select('*')
    .eq('id', submission_id)
    .single();

  if (!submission) {
    return Response.json({ error: 'ì ‘ìˆ˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.' }, { status: 404 });
  }

  // 2. í™˜ë¶ˆ ê¸ˆì•¡ ê³„ì‚°
  const refundAmount = calculateRefundAmount(submission);

  // 3. í™˜ë¶ˆ ìš”ì²­ ìƒì„±
  const { data, error } = await supabase
    .from('refund_requests')
    .insert({
      submission_id,
      client_id: session.user.client_id,
      requested_amount: refundAmount,
      reason,
      status: 'pending',
    })
    .select()
    .single();

  if (error) {
    return Response.json({ error: 'í™˜ë¶ˆ ìš”ì²­ ì‹¤íŒ¨' }, { status: 500 });
  }

  // 4. ê´€ë¦¬ìì—ê²Œ ì•Œë¦¼ ì „ì†¡
  await sendAdminNotification({
    type: 'refund_request',
    title: 'ìƒˆë¡œìš´ í™˜ë¶ˆ ìš”ì²­',
    message: `${submission.company_name}ì—ì„œ í™˜ë¶ˆì„ ìš”ì²­í–ˆìŠµë‹ˆë‹¤.`,
    link: `/admin/refund-requests/${data.id}`,
  });

  return Response.json({ success: true, data });
}
```

**ê´€ë¦¬ì - í™˜ë¶ˆ ìŠ¹ì¸/ê±°ë¶€ API**:
```typescript
// app/api/admin/refund-requests/[id]/approve/route.ts
export async function POST(
  request: Request,
  { params }: { params: { id: string } }
) {
  const { id } = await params;
  const { action, admin_note } = await request.json(); // 'approve' or 'reject'
  const session = await getServerSession();

  // 1. í™˜ë¶ˆ ìš”ì²­ ì¡°íšŒ
  const { data: refundRequest } = await supabase
    .from('refund_requests')
    .select('*, submissions:place_submissions(*)')
    .eq('id', id)
    .single();

  if (!refundRequest || refundRequest.status !== 'pending') {
    return Response.json({ error: 'ìœ íš¨í•˜ì§€ ì•Šì€ ìš”ì²­ì…ë‹ˆë‹¤.' }, { status: 400 });
  }

  // 2. ìŠ¹ì¸ ì²˜ë¦¬
  if (action === 'approve') {
    // íŠ¸ëœì­ì…˜ ì‹œì‘
    const { error: updateError } = await supabase
      .from('refund_requests')
      .update({
        status: 'approved',
        approved_by: session.user.id,
        approved_at: new Date().toISOString(),
        admin_note,
      })
      .eq('id', id);

    if (updateError) throw updateError;

    // ì‹¤ì œ í™˜ë¶ˆ ì²˜ë¦¬
    await processRefund({
      client_id: refundRequest.client_id,
      amount: refundRequest.requested_amount,
      submission_id: refundRequest.submission_id,
    });

    // ì ‘ìˆ˜ ìƒíƒœ ì—…ë°ì´íŠ¸
    await supabase
      .from('place_submissions')
      .update({ status: 'cancelled' })
      .eq('id', refundRequest.submission_id);

    // í´ë¼ì´ì–¸íŠ¸ ì•Œë¦¼
    await sendClientNotification({
      client_id: refundRequest.client_id,
      type: 'refund_approved',
      title: 'í™˜ë¶ˆ ìŠ¹ì¸',
      message: `${refundRequest.submissions.company_name} í™˜ë¶ˆì´ ìŠ¹ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.`,
      link: `/dashboard/reward/status`,
    });
  }

  // 3. ê±°ë¶€ ì²˜ë¦¬
  if (action === 'reject') {
    await supabase
      .from('refund_requests')
      .update({
        status: 'rejected',
        approved_by: session.user.id,
        approved_at: new Date().toISOString(),
        admin_note,
      })
      .eq('id', id);

    // í´ë¼ì´ì–¸íŠ¸ ì•Œë¦¼
    await sendClientNotification({
      client_id: refundRequest.client_id,
      type: 'refund_rejected',
      title: 'í™˜ë¶ˆ ê±°ë¶€',
      message: `${refundRequest.submissions.company_name} í™˜ë¶ˆì´ ê±°ë¶€ë˜ì—ˆìŠµë‹ˆë‹¤. ì‚¬ìœ : ${admin_note}`,
      link: `/dashboard/reward/status`,
    });
  }

  return Response.json({ success: true });
}
```

#### Step 3: í´ë¼ì´ì–¸íŠ¸ UI êµ¬í˜„

**í™˜ë¶ˆ ìš”ì²­ ë‹¤ì´ì–¼ë¡œê·¸**:
```typescript
// components/dashboard/reward/refund-request-dialog.tsx
export function RefundRequestDialog({ submission }: { submission: PlaceSubmission }) {
  const [reason, setReason] = useState('');
  const [loading, setLoading] = useState(false);

  const handleSubmit = async () => {
    setLoading(true);
    try {
      const res = await fetch('/api/client/refund-request', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          submission_id: submission.id,
          reason,
        }),
      });

      if (res.ok) {
        toast.success('í™˜ë¶ˆ ìš”ì²­ì´ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤.');
        router.refresh();
      } else {
        toast.error('í™˜ë¶ˆ ìš”ì²­ ì‹¤íŒ¨');
      }
    } finally {
      setLoading(false);
    }
  };

  return (
    <Dialog>
      <DialogTrigger asChild>
        <Button variant="outline">í™˜ë¶ˆ ìš”ì²­</Button>
      </DialogTrigger>
      <DialogContent>
        <DialogHeader>
          <DialogTitle>í™˜ë¶ˆ ìš”ì²­</DialogTitle>
          <DialogDescription>
            í™˜ë¶ˆ ì‚¬ìœ ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”. ê´€ë¦¬ì ìŠ¹ì¸ í›„ í™˜ë¶ˆì´ ì²˜ë¦¬ë©ë‹ˆë‹¤.
          </DialogDescription>
        </DialogHeader>

        <div className="space-y-4">
          <div>
            <Label>ì—…ì²´ëª…</Label>
            <div className="font-semibold">{submission.company_name}</div>
          </div>

          <div>
            <Label>í™˜ë¶ˆ ì˜ˆìƒ ê¸ˆì•¡</Label>
            <div className="text-lg font-bold text-blue-600">
              {calculateRefundAmount(submission).toLocaleString()}ì›
            </div>
          </div>

          <div>
            <Label>í™˜ë¶ˆ ì‚¬ìœ  *</Label>
            <Textarea
              value={reason}
              onChange={(e) => setReason(e.target.value)}
              placeholder="í™˜ë¶ˆ ì‚¬ìœ ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”"
              rows={4}
            />
          </div>
        </div>

        <DialogFooter>
          <Button variant="outline" onClick={() => {}}>
            ì·¨ì†Œ
          </Button>
          <Button onClick={handleSubmit} disabled={!reason || loading}>
            {loading ? 'ìš”ì²­ ì¤‘...' : 'í™˜ë¶ˆ ìš”ì²­'}
          </Button>
        </DialogFooter>
      </DialogContent>
    </Dialog>
  );
}
```

**í™˜ë¶ˆ ìš”ì²­ ìƒíƒœ í‘œì‹œ**:
```typescript
// components/dashboard/reward/refund-status-badge.tsx
export function RefundStatusBadge({ status }: { status: string }) {
  const config = {
    pending: { label: 'ìŠ¹ì¸ ëŒ€ê¸°', variant: 'warning' },
    approved: { label: 'ìŠ¹ì¸ ì™„ë£Œ', variant: 'success' },
    rejected: { label: 'ê±°ë¶€ë¨', variant: 'destructive' },
  };

  return (
    <Badge variant={config[status].variant}>
      {config[status].label}
    </Badge>
  );
}
```

#### Step 4: ê´€ë¦¬ì UI êµ¬í˜„

**í™˜ë¶ˆ ìš”ì²­ ê´€ë¦¬ í˜ì´ì§€**:
```typescript
// app/admin/refund-requests/page.tsx
export default async function RefundRequestsPage() {
  const { data: requests } = await supabase
    .from('refund_requests')
    .select(`
      *,
      clients (company_name, email),
      submissions:place_submissions (company_name, total_points)
    `)
    .order('created_at', { ascending: false });

  return (
    <div className="container mx-auto py-8">
      <div className="flex justify-between items-center mb-6">
        <h1 className="text-3xl font-bold">í™˜ë¶ˆ ìš”ì²­ ê´€ë¦¬</h1>
        <Badge variant="outline">
          ëŒ€ê¸° ì¤‘: {requests?.filter(r => r.status === 'pending').length}ê±´
        </Badge>
      </div>

      <Tabs defaultValue="pending">
        <TabsList>
          <TabsTrigger value="pending">ëŒ€ê¸° ì¤‘</TabsTrigger>
          <TabsTrigger value="approved">ìŠ¹ì¸ ì™„ë£Œ</TabsTrigger>
          <TabsTrigger value="rejected">ê±°ë¶€</TabsTrigger>
        </TabsList>

        <TabsContent value="pending">
          <RefundRequestsTable
            data={requests?.filter(r => r.status === 'pending')}
          />
        </TabsContent>

        <TabsContent value="approved">
          <RefundRequestsTable
            data={requests?.filter(r => r.status === 'approved')}
          />
        </TabsContent>

        <TabsContent value="rejected">
          <RefundRequestsTable
            data={requests?.filter(r => r.status === 'rejected')}
          />
        </TabsContent>
      </Tabs>
    </div>
  );
}
```

**í™˜ë¶ˆ ìŠ¹ì¸/ê±°ë¶€ ë‹¤ì´ì–¼ë¡œê·¸**:
```typescript
// components/admin/refund-requests/approve-dialog.tsx
export function ApproveRefundDialog({ request }: { request: RefundRequest }) {
  const [action, setAction] = useState<'approve' | 'reject'>('approve');
  const [adminNote, setAdminNote] = useState('');
  const [loading, setLoading] = useState(false);

  const handleSubmit = async () => {
    setLoading(true);
    try {
      const res = await fetch(`/api/admin/refund-requests/${request.id}/approve`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ action, admin_note: adminNote }),
      });

      if (res.ok) {
        toast.success(action === 'approve' ? 'í™˜ë¶ˆì´ ìŠ¹ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.' : 'í™˜ë¶ˆì´ ê±°ë¶€ë˜ì—ˆìŠµë‹ˆë‹¤.');
        router.refresh();
      }
    } finally {
      setLoading(false);
    }
  };

  return (
    <Dialog>
      <DialogTrigger asChild>
        <Button size="sm">ì²˜ë¦¬</Button>
      </DialogTrigger>
      <DialogContent className="max-w-2xl">
        <DialogHeader>
          <DialogTitle>í™˜ë¶ˆ ìš”ì²­ ì²˜ë¦¬</DialogTitle>
        </DialogHeader>

        <div className="space-y-4">
          <div className="grid grid-cols-2 gap-4">
            <div>
              <Label>í´ë¼ì´ì–¸íŠ¸</Label>
              <div className="font-semibold">{request.clients.company_name}</div>
            </div>
            <div>
              <Label>ì—…ì²´ëª…</Label>
              <div className="font-semibold">{request.submissions.company_name}</div>
            </div>
          </div>

          <div>
            <Label>í™˜ë¶ˆ ìš”ì²­ ê¸ˆì•¡</Label>
            <div className="text-2xl font-bold text-red-600">
              {request.requested_amount.toLocaleString()}ì›
            </div>
          </div>

          <div>
            <Label>ìš”ì²­ ì‚¬ìœ </Label>
            <div className="p-3 bg-gray-50 rounded-md">
              {request.reason || 'ì‚¬ìœ  ì—†ìŒ'}
            </div>
          </div>

          <Separator />

          <div>
            <Label>ì²˜ë¦¬ ê²°ì • *</Label>
            <RadioGroup value={action} onValueChange={setAction}>
              <div className="flex items-center space-x-2">
                <RadioGroupItem value="approve" id="approve" />
                <Label htmlFor="approve">ìŠ¹ì¸</Label>
              </div>
              <div className="flex items-center space-x-2">
                <RadioGroupItem value="reject" id="reject" />
                <Label htmlFor="reject">ê±°ë¶€</Label>
              </div>
            </RadioGroup>
          </div>

          <div>
            <Label>ê´€ë¦¬ì ë©”ëª¨ {action === 'reject' && '*'}</Label>
            <Textarea
              value={adminNote}
              onChange={(e) => setAdminNote(e.target.value)}
              placeholder={
                action === 'approve'
                  ? 'ìŠ¹ì¸ ë©”ëª¨ (ì„ íƒì‚¬í•­)'
                  : 'ê±°ë¶€ ì‚¬ìœ ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš” (í•„ìˆ˜)'
              }
              rows={3}
            />
          </div>
        </div>

        <DialogFooter>
          <Button variant="outline" onClick={() => {}}>
            ì·¨ì†Œ
          </Button>
          <Button
            onClick={handleSubmit}
            disabled={loading || (action === 'reject' && !adminNote)}
            variant={action === 'approve' ? 'default' : 'destructive'}
          >
            {loading ? 'ì²˜ë¦¬ ì¤‘...' : action === 'approve' ? 'ìŠ¹ì¸' : 'ê±°ë¶€'}
          </Button>
        </DialogFooter>
      </DialogContent>
    </Dialog>
  );
}
```

#### Step 5: ì•Œë¦¼ ì‹œìŠ¤í…œ ì—°ë™

```typescript
// lib/notifications.ts
export async function sendAdminNotification(data: {
  type: string;
  title: string;
  message: string;
  link: string;
}) {
  // ëª¨ë“  ê´€ë¦¬ìì—ê²Œ ì•Œë¦¼ ì „ì†¡
  const { data: admins } = await supabase
    .from('users')
    .select('id')
    .eq('role', 'admin');

  for (const admin of admins) {
    await supabase.from('notifications').insert({
      user_id: admin.id,
      type: data.type,
      title: data.title,
      message: data.message,
      link: data.link,
    });
  }
}

export async function sendClientNotification(data: {
  client_id: string;
  type: string;
  title: string;
  message: string;
  link: string;
}) {
  // í´ë¼ì´ì–¸íŠ¸ ì‚¬ìš©ì ì¡°íšŒ
  const { data: clientUser } = await supabase
    .from('users')
    .select('id')
    .eq('client_id', data.client_id)
    .single();

  if (clientUser) {
    await supabase.from('notifications').insert({
      user_id: clientUser.id,
      type: data.type,
      title: data.title,
      message: data.message,
      link: data.link,
    });
  }
}
```

---

### ì²´í¬ë¦¬ìŠ¤íŠ¸

#### ë°ì´í„°ë² ì´ìŠ¤
- [ ] refund_requests í…Œì´ë¸” ìƒì„±
- [ ] ì¸ë±ìŠ¤ ì¶”ê°€
- [ ] ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ ì‘ì„±

#### API êµ¬í˜„
- [ ] POST /api/client/refund-request - í™˜ë¶ˆ ìš”ì²­ API
- [ ] POST /api/admin/refund-requests/[id]/approve - ìŠ¹ì¸/ê±°ë¶€ API
- [ ] GET /api/admin/refund-requests - í™˜ë¶ˆ ìš”ì²­ ëª©ë¡ API

#### í´ë¼ì´ì–¸íŠ¸ UI
- [ ] RefundRequestDialog ì»´í¬ë„ŒíŠ¸
- [ ] RefundStatusBadge ì»´í¬ë„ŒíŠ¸
- [ ] í™˜ë¶ˆ ìš”ì²­ ë²„íŠ¼ ì¶”ê°€ (ë¦¬ì›Œë“œ ìƒì„¸)
- [ ] í™˜ë¶ˆ ìš”ì²­ ìƒíƒœ í‘œì‹œ

#### ê´€ë¦¬ì UI
- [ ] í™˜ë¶ˆ ìš”ì²­ ê´€ë¦¬ í˜ì´ì§€ (/admin/refund-requests)
- [ ] RefundRequestsTable ì»´í¬ë„ŒíŠ¸
- [ ] ApproveRefundDialog ì»´í¬ë„ŒíŠ¸
- [ ] ìƒíƒœë³„ í•„í„°ë§ (ëŒ€ê¸°/ìŠ¹ì¸/ê±°ë¶€)

#### ì•Œë¦¼ ì‹œìŠ¤í…œ
- [ ] ê´€ë¦¬ì ì•Œë¦¼ (ìƒˆ í™˜ë¶ˆ ìš”ì²­)
- [ ] í´ë¼ì´ì–¸íŠ¸ ì•Œë¦¼ (ìŠ¹ì¸/ê±°ë¶€ ê²°ê³¼)

#### í…ŒìŠ¤íŠ¸
- [ ] í™˜ë¶ˆ ìš”ì²­ ìƒì„± í…ŒìŠ¤íŠ¸
- [ ] ìŠ¹ì¸ ì²˜ë¦¬ í…ŒìŠ¤íŠ¸
- [ ] ê±°ë¶€ ì²˜ë¦¬ í…ŒìŠ¤íŠ¸
- [ ] ì•Œë¦¼ ì „ì†¡ í…ŒìŠ¤íŠ¸
- [ ] íŠ¸ëœì­ì…˜ ë¬´ê²°ì„± í…ŒìŠ¤íŠ¸

---

## 2. ì „ì²´ ìƒí’ˆ ë¸”ë¼ì¸ë“œ ê¸°ëŠ¥ (20ë§Œì›)

### í˜„ì¬ ìƒí™©
- í´ë¼ì´ì–¸íŠ¸ë³„ ìƒí’ˆ ìˆ¨ê¹€ ê¸°ëŠ¥ ì¡´ì¬ (`is_visible` in `client_product_prices`)
- ìš”ì²­ì‚¬í•­: **ì „ì²´ í´ë¼ì´ì–¸íŠ¸**ì—ê²Œ íŠ¹ì • ìƒí’ˆì„ ìˆ¨ê¸°ëŠ” ê¸€ë¡œë²Œ ë¸”ë¼ì¸ë“œ

### ì¶”ê°€ê¸ˆ ë°œìƒ ì´ìœ  (ë¹„ì „ë¬¸ê°€ìš©)
í˜„ì¬ëŠ” ê±°ë˜ì²˜ë³„ë¡œ ìƒí’ˆì„ ìˆ¨ê¸¸ ìˆ˜ ìˆì§€ë§Œ, ìš”ì²­ì‚¬í•­ì€ **ëª¨ë“  ê±°ë˜ì²˜**ì—ê²Œ íŠ¹ì • ìƒí’ˆì„ í•œ ë²ˆì— ìˆ¨ê¸°ëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ì¹´ì¹´ì˜¤ë§µ ìƒí’ˆì— ë¬¸ì œê°€ ìƒê²¼ì„ ë•Œ, ëª¨ë“  í´ë¼ì´ì–¸íŠ¸ê°€ ì ‘ìˆ˜í•˜ì§€ ëª»í•˜ë„ë¡ ê¸´ê¸‰ ì°¨ë‹¨í•˜ëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´:
1. ìƒí’ˆ í…Œì´ë¸”ì— ê¸€ë¡œë²Œ í™œì„±í™” í•„ë“œ ì¶”ê°€
2. ê´€ë¦¬ì ìƒí’ˆ ê´€ë¦¬ í™”ë©´ ê°œë°œ
3. ì „ì²´ ì ‘ìˆ˜ í¼ì— ë¸”ë¼ì¸ë“œ ìƒí’ˆ í•„í„°ë§ ì ìš©
4. í´ë¼ì´ì–¸íŠ¸ í™”ë©´ì—ì„œ ìˆ¨ê¹€ ì²˜ë¦¬

---

### êµ¬í˜„ ê³„íš

#### Step 1: DB ìŠ¤í‚¤ë§ˆ ìˆ˜ì •

```sql
-- product_categories í…Œì´ë¸”ì— is_active ì»¬ëŸ¼ ì¶”ê°€
ALTER TABLE product_categories
ADD COLUMN is_active BOOLEAN DEFAULT true;

-- ì¸ë±ìŠ¤ ì¶”ê°€
CREATE INDEX idx_product_categories_active ON product_categories(is_active);

-- ì½”ë©˜íŠ¸ ì¶”ê°€
COMMENT ON COLUMN product_categories.is_active IS 'ì „ì²´ í´ë¼ì´ì–¸íŠ¸ì— ëŒ€í•œ ìƒí’ˆ í™œì„±í™” ì—¬ë¶€ (ê¸€ë¡œë²Œ ë¸”ë¼ì¸ë“œ)';
```

#### Step 2: ê´€ë¦¬ì - ìƒí’ˆ ê´€ë¦¬ í˜ì´ì§€

**ìƒí’ˆ ëª©ë¡ ë° í™œì„±í™” í† ê¸€**:
```typescript
// app/admin/products/page.tsx
export default async function ProductsManagementPage() {
  const { data: products } = await supabase
    .from('product_categories')
    .select('*')
    .order('created_at');

  return (
    <div className="container mx-auto py-8">
      <div className="flex justify-between items-center mb-6">
        <h1 className="text-3xl font-bold">ìƒí’ˆ ê´€ë¦¬</h1>
        <Badge variant="outline">
          í™œì„±: {products?.filter(p => p.is_active).length} / {products?.length}
        </Badge>
      </div>

      <Card>
        <CardContent className="p-6">
          <div className="space-y-4">
            {products?.map((product) => (
              <div
                key={product.id}
                className="flex items-center justify-between p-4 border rounded-lg"
              >
                <div className="flex items-center gap-4">
                  <div className={`w-12 h-12 rounded-lg flex items-center justify-center ${
                    product.is_active ? 'bg-green-100' : 'bg-gray-100'
                  }`}>
                    <Package className={product.is_active ? 'text-green-600' : 'text-gray-400'} />
                  </div>
                  <div>
                    <div className="font-semibold">{product.name}</div>
                    <div className="text-sm text-gray-500">{product.slug}</div>
                  </div>
                </div>

                <div className="flex items-center gap-4">
                  <Badge variant={product.is_active ? 'default' : 'secondary'}>
                    {product.is_active ? 'í™œì„±í™”' : 'ë¹„í™œì„±í™”'}
                  </Badge>
                  <ProductToggleSwitch product={product} />
                </div>
              </div>
            ))}
          </div>
        </CardContent>
      </Card>
    </div>
  );
}
```

**ìƒí’ˆ í™œì„±í™” í† ê¸€ ì»´í¬ë„ŒíŠ¸**:
```typescript
// components/admin/products/product-toggle-switch.tsx
'use client';

export function ProductToggleSwitch({ product }: { product: ProductCategory }) {
  const [isActive, setIsActive] = useState(product.is_active);
  const [loading, setLoading] = useState(false);

  const handleToggle = async (checked: boolean) => {
    if (loading) return;

    // í™•ì¸ ë‹¤ì´ì–¼ë¡œê·¸
    const confirmed = window.confirm(
      checked
        ? `"${product.name}" ìƒí’ˆì„ í™œì„±í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ? ëª¨ë“  í´ë¼ì´ì–¸íŠ¸ê°€ ì ‘ìˆ˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`
        : `"${product.name}" ìƒí’ˆì„ ë¹„í™œì„±í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ? ëª¨ë“  í´ë¼ì´ì–¸íŠ¸ê°€ ì ‘ìˆ˜í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`
    );

    if (!confirmed) return;

    setLoading(true);
    try {
      const res = await fetch(`/api/admin/products/${product.id}/toggle`, {
        method: 'PATCH',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ is_active: checked }),
      });

      if (res.ok) {
        setIsActive(checked);
        toast.success(checked ? 'ìƒí’ˆì´ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤.' : 'ìƒí’ˆì´ ë¹„í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤.');
        router.refresh();
      } else {
        toast.error('ìƒí’ˆ ìƒíƒœ ë³€ê²½ ì‹¤íŒ¨');
      }
    } finally {
      setLoading(false);
    }
  };

  return (
    <Switch
      checked={isActive}
      onCheckedChange={handleToggle}
      disabled={loading}
    />
  );
}
```

#### Step 3: API êµ¬í˜„

```typescript
// app/api/admin/products/[id]/toggle/route.ts
export async function PATCH(
  request: Request,
  { params }: { params: { id: string } }
) {
  const { id } = await params;
  const { is_active } = await request.json();

  // ê´€ë¦¬ì ê¶Œí•œ í™•ì¸
  const session = await getServerSession();
  if (session?.user?.role !== 'admin') {
    return Response.json({ error: 'ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.' }, { status: 403 });
  }

  // ìƒí’ˆ í™œì„±í™” ìƒíƒœ ì—…ë°ì´íŠ¸
  const { error } = await supabase
    .from('product_categories')
    .update({ is_active, updated_at: new Date().toISOString() })
    .eq('id', id);

  if (error) {
    return Response.json({ error: 'ìƒí’ˆ ìƒíƒœ ë³€ê²½ ì‹¤íŒ¨' }, { status: 500 });
  }

  // ìºì‹œ ë¬´íš¨í™”
  revalidatePath('/admin/products');
  revalidatePath('/dashboard');

  return Response.json({ success: true });
}
```

#### Step 4: í´ë¼ì´ì–¸íŠ¸ í™”ë©´ì— ë¸”ë¼ì¸ë“œ ì ìš©

**ìƒí’ˆ ëª©ë¡ ì¡°íšŒ ì‹œ í•„í„°ë§**:
```typescript
// app/api/products/available/route.ts
export async function GET() {
  const session = await getServerSession();

  // 1. í™œì„±í™”ëœ ìƒí’ˆë§Œ ì¡°íšŒ
  const { data: activeProducts } = await supabase
    .from('product_categories')
    .select('*')
    .eq('is_active', true);

  // 2. í´ë¼ì´ì–¸íŠ¸ë³„ ê°€ê²© ë° í‘œì‹œ ì—¬ë¶€ ì¡°ì¸
  const { data: clientProducts } = await supabase
    .from('client_product_prices')
    .select('*, product_categories(*)')
    .eq('client_id', session.user.client_id)
    .eq('is_visible', true) // í´ë¼ì´ì–¸íŠ¸ë³„ ìˆ¨ê¹€
    .in('category_id', activeProducts.map(p => p.id)); // ê¸€ë¡œë²Œ í™œì„±í™” ìƒí’ˆë§Œ

  return Response.json({ products: clientProducts });
}
```

**ì ‘ìˆ˜ í¼ì—ì„œ ë¹„í™œì„±í™” ìƒí’ˆ ìˆ¨ê¹€**:
```typescript
// components/dashboard/submission-form.tsx
export function SubmissionForm() {
  const { data: products } = useSWR('/api/products/available');

  // í™œì„±í™”ëœ ìƒí’ˆë§Œ í‘œì‹œ
  const availableProducts = products?.filter((p) => p.product_categories?.is_active);

  return (
    <Select>
      {availableProducts?.map((product) => (
        <SelectItem key={product.id} value={product.id}>
          {product.product_categories.name}
        </SelectItem>
      ))}
    </Select>
  );
}
```

#### Step 5: ë¸”ë¼ì¸ë“œ ìƒíƒœ ì•ˆë‚´

**ë¹„í™œì„±í™” ìƒí’ˆ ì•ˆë‚´ ë©”ì‹œì§€**:
```typescript
// components/dashboard/product-unavailable-notice.tsx
export function ProductUnavailableNotice({ productSlug }: { productSlug: string }) {
  return (
    <Alert variant="warning">
      <AlertCircle className="h-4 w-4" />
      <AlertTitle>ì„œë¹„ìŠ¤ ì¼ì‹œ ì¤‘ë‹¨</AlertTitle>
      <AlertDescription>
        ì£„ì†¡í•©ë‹ˆë‹¤. í•´ë‹¹ ìƒí’ˆì€ í˜„ì¬ ì¼ì‹œì ìœ¼ë¡œ ì ‘ìˆ˜ê°€ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.
        <br />
        ë¹ ë¥¸ ì‹œì¼ ë‚´ì— ì •ìƒí™”í•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.
      </AlertDescription>
    </Alert>
  );
}
```

---

### ì²´í¬ë¦¬ìŠ¤íŠ¸

#### ë°ì´í„°ë² ì´ìŠ¤
- [ ] product_categories í…Œì´ë¸”ì— is_active ì»¬ëŸ¼ ì¶”ê°€
- [ ] ì¸ë±ìŠ¤ ìƒì„±
- [ ] ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ ì‘ì„±

#### API êµ¬í˜„
- [ ] PATCH /api/admin/products/[id]/toggle - ìƒí’ˆ í™œì„±í™” í† ê¸€
- [ ] GET /api/products/available - í™œì„±í™” ìƒí’ˆ ëª©ë¡

#### ê´€ë¦¬ì UI
- [ ] ìƒí’ˆ ê´€ë¦¬ í˜ì´ì§€ (/admin/products)
- [ ] ProductToggleSwitch ì»´í¬ë„ŒíŠ¸
- [ ] ìƒí’ˆ í™œì„±í™” ìƒíƒœ í‘œì‹œ

#### í´ë¼ì´ì–¸íŠ¸ UI
- [ ] ì ‘ìˆ˜ í¼ ìƒí’ˆ í•„í„°ë§ ì ìš©
- [ ] ë¹„í™œì„±í™” ìƒí’ˆ ì•ˆë‚´ ë©”ì‹œì§€
- [ ] ìƒí’ˆ ëª©ë¡ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸

#### í…ŒìŠ¤íŠ¸
- [ ] ìƒí’ˆ í™œì„±í™”/ë¹„í™œì„±í™” í…ŒìŠ¤íŠ¸
- [ ] í´ë¼ì´ì–¸íŠ¸ í™”ë©´ ìƒí’ˆ ìˆ¨ê¹€ í™•ì¸
- [ ] ì ‘ìˆ˜ í¼ í•„í„°ë§ í…ŒìŠ¤íŠ¸
- [ ] ìºì‹œ ë¬´íš¨í™” í™•ì¸

---

## 3. ì¶”ì²œì¸ ID ì…ë ¥ í•„ë“œ (20ë§Œì›)

### ì¶”ê°€ê¸ˆ ë°œìƒ ì´ìœ  (ë¹„ì „ë¬¸ê°€ìš©)
íšŒì›ê°€ì… ì‹œ ì¶”ì²œì¸ ì½”ë“œë¥¼ ì…ë ¥ë°›ì•„ ì¶”ì²œì¸ê³¼ ì‹ ê·œ ê°€ì…ì ëª¨ë‘ì—ê²Œ ë¦¬ì›Œë“œë¥¼ ì§€ê¸‰í•˜ëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤. ì´ëŠ”:
1. ì¶”ì²œì¸ ì½”ë“œ ìƒì„± ë° ê´€ë¦¬
2. íšŒì›ê°€ì… í¼ ìˆ˜ì •
3. ì¶”ì²œ ê´€ê³„ ì €ì¥ (ëˆ„ê°€ ëˆ„êµ¬ë¥¼ ì¶”ì²œí–ˆëŠ”ì§€)
4. ë¦¬ì›Œë“œ ì§€ê¸‰ ë¡œì§ ê°œë°œ
5. ì¶”ì²œ í†µê³„ ë° ê´€ë¦¬ í˜ì´ì§€ ê°œë°œ

ì´ ëª¨ë“  ê¸°ëŠ¥ì´ ìƒˆë¡­ê²Œ ê°œë°œë˜ì–´ì•¼ í•˜ë¯€ë¡œ ì¶”ê°€ê¸ˆì´ ë°œìƒí•©ë‹ˆë‹¤.

---

### êµ¬í˜„ ê³„íš

#### Step 1: DB ìŠ¤í‚¤ë§ˆ ìˆ˜ì •

```sql
-- clients í…Œì´ë¸”ì— ì¶”ì²œì¸ ê´€ë ¨ ì»¬ëŸ¼ ì¶”ê°€
ALTER TABLE clients
ADD COLUMN referral_code VARCHAR(20) UNIQUE,
ADD COLUMN referred_by_client_id UUID REFERENCES clients(id),
ADD COLUMN referral_reward_points INT DEFAULT 0;

-- ì¶”ì²œ ê´€ê³„ í…Œì´ë¸” (ì„ íƒì  - ì¶”ì²œ íˆìŠ¤í† ë¦¬ ì¶”ì ìš©)
CREATE TABLE referrals (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  referrer_id UUID NOT NULL REFERENCES clients(id),
  referred_id UUID NOT NULL REFERENCES clients(id),
  reward_amount INT NOT NULL,
  status TEXT DEFAULT 'pending', -- 'pending', 'completed'
  created_at TIMESTAMPTZ DEFAULT NOW(),
  completed_at TIMESTAMPTZ
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_clients_referral_code ON clients(referral_code);
CREATE INDEX idx_clients_referred_by ON clients(referred_by_client_id);
CREATE INDEX idx_referrals_referrer ON referrals(referrer_id);

-- ì¶”ì²œ ì½”ë“œ ìƒì„± í•¨ìˆ˜
CREATE OR REPLACE FUNCTION generate_referral_code()
RETURNS TEXT AS $$
DECLARE
  code TEXT;
  exists BOOLEAN;
BEGIN
  LOOP
    -- 6ìë¦¬ ëœë¤ ì½”ë“œ ìƒì„± (ì˜ë¬¸ ëŒ€ë¬¸ì + ìˆ«ì)
    code := upper(substring(md5(random()::text) from 1 for 6));

    -- ì¤‘ë³µ í™•ì¸
    SELECT EXISTS(SELECT 1 FROM clients WHERE referral_code = code) INTO exists;

    EXIT WHEN NOT exists;
  END LOOP;

  RETURN code;
END;
$$ LANGUAGE plpgsql;

-- íŠ¸ë¦¬ê±°: ì‹ ê·œ í´ë¼ì´ì–¸íŠ¸ ìƒì„± ì‹œ ìë™ìœ¼ë¡œ ì¶”ì²œ ì½”ë“œ ìƒì„±
CREATE OR REPLACE FUNCTION set_referral_code()
RETURNS TRIGGER AS $$
BEGIN
  IF NEW.referral_code IS NULL THEN
    NEW.referral_code := generate_referral_code();
  END IF;
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER trigger_set_referral_code
BEFORE INSERT ON clients
FOR EACH ROW
EXECUTE FUNCTION set_referral_code();
```

#### Step 2: íšŒì›ê°€ì… í¼ ìˆ˜ì •

```typescript
// app/signup/page.tsx
export default function SignupPage() {
  const [referralCode, setReferralCode] = useState('');
  const [referralValid, setReferralValid] = useState<boolean | null>(null);

  // ì¶”ì²œì¸ ì½”ë“œ ê²€ì¦
  const validateReferralCode = async (code: string) => {
    if (!code) {
      setReferralValid(null);
      return;
    }

    const res = await fetch(`/api/referral/validate?code=${code}`);
    const data = await res.json();
    setReferralValid(data.valid);
  };

  const handleSignup = async (formData: SignupFormData) => {
    const res = await fetch('/api/auth/signup', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        ...formData,
        referral_code: referralCode || null,
      }),
    });

    if (res.ok) {
      router.push('/dashboard');
    }
  };

  return (
    <form onSubmit={handleSubmit(handleSignup)}>
      {/* ê¸°ì¡´ íšŒì›ê°€ì… í•„ë“œë“¤... */}

      <div className="space-y-2">
        <Label htmlFor="referral">ì¶”ì²œì¸ ì½”ë“œ (ì„ íƒì‚¬í•­)</Label>
        <div className="relative">
          <Input
            id="referral"
            value={referralCode}
            onChange={(e) => {
              setReferralCode(e.target.value.toUpperCase());
              validateReferralCode(e.target.value.toUpperCase());
            }}
            placeholder="ì¶”ì²œì¸ ì½”ë“œ ì…ë ¥"
            maxLength={6}
          />
          {referralValid === true && (
            <CheckCircle className="absolute right-3 top-3 h-5 w-5 text-green-500" />
          )}
          {referralValid === false && (
            <XCircle className="absolute right-3 top-3 h-5 w-5 text-red-500" />
          )}
        </div>
        {referralValid === true && (
          <p className="text-sm text-green-600">
            âœ“ ìœ íš¨í•œ ì¶”ì²œì¸ ì½”ë“œì…ë‹ˆë‹¤. ê°€ì… ì‹œ 3,000 í¬ì¸íŠ¸ê°€ ì§€ê¸‰ë©ë‹ˆë‹¤.
          </p>
        )}
        {referralValid === false && (
          <p className="text-sm text-red-600">
            âœ— ìœ íš¨í•˜ì§€ ì•Šì€ ì¶”ì²œì¸ ì½”ë“œì…ë‹ˆë‹¤.
          </p>
        )}
      </div>

      <Button type="submit">ê°€ì…í•˜ê¸°</Button>
    </form>
  );
}
```

#### Step 3: API êµ¬í˜„

**ì¶”ì²œì¸ ì½”ë“œ ê²€ì¦ API**:
```typescript
// app/api/referral/validate/route.ts
export async function GET(request: Request) {
  const { searchParams } = new URL(request.url);
  const code = searchParams.get('code');

  if (!code) {
    return Response.json({ valid: false });
  }

  const { data } = await supabase
    .from('clients')
    .select('id, company_name')
    .eq('referral_code', code.toUpperCase())
    .single();

  return Response.json({
    valid: !!data,
    referrer: data ? { id: data.id, name: data.company_name } : null,
  });
}
```

**íšŒì›ê°€ì… ì‹œ ì¶”ì²œì¸ ì²˜ë¦¬**:
```typescript
// app/api/auth/signup/route.ts
export async function POST(request: Request) {
  const { email, password, company_name, referral_code } = await request.json();

  // 1. ì‚¬ìš©ì ìƒì„± (Supabase Auth)
  const { data: authData, error: authError } = await supabase.auth.signUp({
    email,
    password,
  });

  if (authError) throw authError;

  // 2. ì¶”ì²œì¸ í™•ì¸
  let referrerId = null;
  if (referral_code) {
    const { data: referrer } = await supabase
      .from('clients')
      .select('id')
      .eq('referral_code', referral_code)
      .single();

    referrerId = referrer?.id;
  }

  // 3. í´ë¼ì´ì–¸íŠ¸ ìƒì„± (ì¶”ì²œì¸ ì •ë³´ í¬í•¨)
  const { data: client, error: clientError } = await supabase
    .from('clients')
    .insert({
      user_id: authData.user.id,
      company_name,
      email,
      referred_by_client_id: referrerId,
      remaining_points: referrerId ? 3000 : 0, // ì¶”ì²œë°›ì€ ê²½ìš° 3,000P ì§€ê¸‰
    })
    .select()
    .single();

  if (clientError) throw clientError;

  // 4. ì¶”ì²œì¸ì—ê²Œ ë¦¬ì›Œë“œ ì§€ê¸‰
  if (referrerId) {
    // ì¶”ì²œì¸ í¬ì¸íŠ¸ ì¦ê°€
    await supabase.rpc('add_client_points', {
      client_id: referrerId,
      points: 5000, // ì¶”ì²œì¸ì—ê²Œ 5,000P ì§€ê¸‰
    });

    // ì¶”ì²œ ê´€ê³„ ê¸°ë¡
    await supabase.from('referrals').insert({
      referrer_id: referrerId,
      referred_id: client.id,
      reward_amount: 5000,
      status: 'completed',
      completed_at: new Date().toISOString(),
    });

    // ì¶”ì²œì¸ì—ê²Œ ì•Œë¦¼
    await sendReferralNotification(referrerId, {
      type: 'new_referral',
      message: `${company_name}ë‹˜ì´ ì¶”ì²œìœ¼ë¡œ ê°€ì…í–ˆìŠµë‹ˆë‹¤! 5,000Pê°€ ì§€ê¸‰ë˜ì—ˆìŠµë‹ˆë‹¤.`,
    });
  }

  return Response.json({ success: true, client });
}
```

#### Step 4: ë§ˆì´í˜ì´ì§€ì— ë‚´ ì¶”ì²œ ì½”ë“œ í‘œì‹œ

```typescript
// app/dashboard/my-page/referral-section.tsx
export function ReferralSection({ client }: { client: Client }) {
  const [copied, setCopied] = useState(false);

  const copyReferralCode = () => {
    navigator.clipboard.writeText(client.referral_code);
    setCopied(true);
    setTimeout(() => setCopied(false), 2000);
  };

  return (
    <Card>
      <CardHeader>
        <CardTitle>ë‚´ ì¶”ì²œ ì½”ë“œ</CardTitle>
        <CardDescription>
          ì¹œêµ¬ë¥¼ ì´ˆëŒ€í•˜ê³  ë¦¬ì›Œë“œë¥¼ ë°›ìœ¼ì„¸ìš”!
        </CardDescription>
      </CardHeader>
      <CardContent>
        <div className="space-y-4">
          <div className="flex items-center gap-4">
            <div className="flex-1">
              <div className="text-sm text-gray-500 mb-1">ë‚´ ì¶”ì²œ ì½”ë“œ</div>
              <div className="text-3xl font-bold text-blue-600">
                {client.referral_code}
              </div>
            </div>
            <Button onClick={copyReferralCode} variant="outline">
              {copied ? (
                <>
                  <Check className="h-4 w-4 mr-2" />
                  ë³µì‚¬ë¨
                </>
              ) : (
                <>
                  <Copy className="h-4 w-4 mr-2" />
                  ë³µì‚¬
                </>
              )}
            </Button>
          </div>

          <Separator />

          <div className="grid grid-cols-2 gap-4">
            <div className="text-center p-4 bg-blue-50 rounded-lg">
              <div className="text-2xl font-bold text-blue-600">
                {client.referral_stats?.total_referrals || 0}
              </div>
              <div className="text-sm text-gray-600">ì¶”ì²œí•œ ì¹œêµ¬</div>
            </div>
            <div className="text-center p-4 bg-green-50 rounded-lg">
              <div className="text-2xl font-bold text-green-600">
                {client.referral_reward_points?.toLocaleString() || 0}P
              </div>
              <div className="text-sm text-gray-600">ì¶”ì²œ ë¦¬ì›Œë“œ</div>
            </div>
          </div>

          <div className="p-4 bg-gray-50 rounded-lg space-y-2">
            <div className="font-semibold">ì¶”ì²œ í˜œíƒ</div>
            <ul className="text-sm space-y-1 text-gray-600">
              <li>â€¢ ì¹œêµ¬ê°€ ê°€ì…í•˜ë©´: ì¹œêµ¬ì—ê²Œ <strong>3,000P</strong></li>
              <li>â€¢ ë‚˜ì—ê²ŒëŠ”: <strong>5,000P</strong> ì§€ê¸‰</li>
              <li>â€¢ ì œí•œ ì—†ì´ ë¬´ì œí•œ ì´ˆëŒ€ ê°€ëŠ¥</li>
            </ul>
          </div>
        </div>
      </CardContent>
    </Card>
  );
}
```

#### Step 5: ê´€ë¦¬ì - ì¶”ì²œ í†µê³„ í˜ì´ì§€

```typescript
// app/admin/referrals/page.tsx
export default async function ReferralsStatsPage() {
  const { data: stats } = await supabase
    .from('referrals')
    .select('*, referrer:clients!referrer_id(company_name), referred:clients!referred_id(company_name)')
    .order('created_at', { ascending: false });

  const totalReferrals = stats?.length || 0;
  const totalRewards = stats?.reduce((sum, r) => sum + r.reward_amount, 0) || 0;

  return (
    <div className="container mx-auto py-8">
      <h1 className="text-3xl font-bold mb-6">ì¶”ì²œ í†µê³„</h1>

      <div className="grid grid-cols-3 gap-4 mb-6">
        <Card>
          <CardContent className="p-6">
            <div className="text-2xl font-bold">{totalReferrals}ê±´</div>
            <div className="text-sm text-gray-600">ì´ ì¶”ì²œ ìˆ˜</div>
          </CardContent>
        </Card>
        <Card>
          <CardContent className="p-6">
            <div className="text-2xl font-bold">{totalRewards.toLocaleString()}P</div>
            <div className="text-sm text-gray-600">ì§€ê¸‰ëœ ë¦¬ì›Œë“œ</div>
          </CardContent>
        </Card>
        <Card>
          <CardContent className="p-6">
            <div className="text-2xl font-bold">
              {(totalRewards / (totalReferrals || 1)).toLocaleString()}P
            </div>
            <div className="text-sm text-gray-600">í‰ê·  ë¦¬ì›Œë“œ</div>
          </CardContent>
        </Card>
      </div>

      <Card>
        <CardHeader>
          <CardTitle>ì¶”ì²œ ë‚´ì—­</CardTitle>
        </CardHeader>
        <CardContent>
          <Table>
            <TableHeader>
              <TableRow>
                <TableHead>ì¶”ì²œì¸</TableHead>
                <TableHead>ì‹ ê·œ ê°€ì…ì</TableHead>
                <TableHead>ë¦¬ì›Œë“œ</TableHead>
                <TableHead>ìƒíƒœ</TableHead>
                <TableHead>ì¼ì‹œ</TableHead>
              </TableRow>
            </TableHeader>
            <TableBody>
              {stats?.map((referral) => (
                <TableRow key={referral.id}>
                  <TableCell>{referral.referrer.company_name}</TableCell>
                  <TableCell>{referral.referred.company_name}</TableCell>
                  <TableCell>{referral.reward_amount.toLocaleString()}P</TableCell>
                  <TableCell>
                    <Badge variant={referral.status === 'completed' ? 'success' : 'default'}>
                      {referral.status === 'completed' ? 'ì§€ê¸‰ ì™„ë£Œ' : 'ëŒ€ê¸°'}
                    </Badge>
                  </TableCell>
                  <TableCell>{formatDate(referral.created_at)}</TableCell>
                </TableRow>
              ))}
            </TableBody>
          </Table>
        </CardContent>
      </Card>
    </div>
  );
}
```

---

### ì²´í¬ë¦¬ìŠ¤íŠ¸

#### ë°ì´í„°ë² ì´ìŠ¤
- [ ] clients í…Œì´ë¸”ì— ì¶”ì²œ ê´€ë ¨ ì»¬ëŸ¼ ì¶”ê°€
- [ ] referrals í…Œì´ë¸” ìƒì„±
- [ ] ì¶”ì²œ ì½”ë“œ ìƒì„± í•¨ìˆ˜ ì‘ì„±
- [ ] íŠ¸ë¦¬ê±° ìƒì„± (ìë™ ì½”ë“œ í• ë‹¹)
- [ ] ì¸ë±ìŠ¤ ìƒì„±

#### API êµ¬í˜„
- [ ] GET /api/referral/validate - ì¶”ì²œ ì½”ë“œ ê²€ì¦
- [ ] POST /api/auth/signup - íšŒì›ê°€ì… ì‹œ ì¶”ì²œì¸ ì²˜ë¦¬
- [ ] GET /api/referral/stats - ë‚´ ì¶”ì²œ í†µê³„

#### í´ë¼ì´ì–¸íŠ¸ UI
- [ ] íšŒì›ê°€ì… í¼ì— ì¶”ì²œ ì½”ë“œ ì…ë ¥ í•„ë“œ
- [ ] ì¶”ì²œ ì½”ë“œ ì‹¤ì‹œê°„ ê²€ì¦
- [ ] ë§ˆì´í˜ì´ì§€ ì¶”ì²œ ì„¹ì…˜
- [ ] ì¶”ì²œ ì½”ë“œ ë³µì‚¬ ê¸°ëŠ¥

#### ê´€ë¦¬ì UI
- [ ] ì¶”ì²œ í†µê³„ í˜ì´ì§€
- [ ] ì¶”ì²œ ë‚´ì—­ í…Œì´ë¸”
- [ ] í†µê³„ ëŒ€ì‹œë³´ë“œ

#### ê¸°ëŠ¥
- [ ] ì¶”ì²œì¸ í¬ì¸íŠ¸ ì§€ê¸‰ ë¡œì§
- [ ] ì‹ ê·œ ê°€ì…ì í¬ì¸íŠ¸ ì§€ê¸‰
- [ ] ì¶”ì²œ ì•Œë¦¼ ì „ì†¡

#### í…ŒìŠ¤íŠ¸
- [ ] ì¶”ì²œ ì½”ë“œ ìƒì„± í…ŒìŠ¤íŠ¸
- [ ] ì¶”ì²œ ì½”ë“œ ê²€ì¦ í…ŒìŠ¤íŠ¸
- [ ] í¬ì¸íŠ¸ ì§€ê¸‰ í…ŒìŠ¤íŠ¸
- [ ] ì¶”ì²œ ê´€ê³„ ì €ì¥ í…ŒìŠ¤íŠ¸

---

## 4. ì „ì²´ ê¸°ë³¸ ê°€ê²© ì„¤ì • (20ë§Œì›)

### ì¶”ê°€ê¸ˆ ë°œìƒ ì´ìœ  (ë¹„ì „ë¬¸ê°€ìš©)
í˜„ì¬ëŠ” ê° ê±°ë˜ì²˜ë§ˆë‹¤ ê°œë³„ì ìœ¼ë¡œ ê°€ê²©ì„ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤. ìš”ì²­ì‚¬í•­ì€ **ëª¨ë“  ì‹ ê·œ ê±°ë˜ì²˜ì— ìë™ ì ìš©ë˜ëŠ” ê¸°ë³¸ ê°€ê²©í‘œ**ë¥¼ ì„¤ì •í•˜ëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´:
1. ì‹ ê·œ ê±°ë˜ì²˜ ë“±ë¡ ì‹œ ìë™ìœ¼ë¡œ ê¸°ë³¸ ê°€ê²©ì´ ì„¸íŒ…ë¨
2. ê´€ë¦¬ìê°€ ê¸°ë³¸ ê°€ê²©í‘œë¥¼ ê´€ë¦¬í•˜ëŠ” í™”ë©´ ê°œë°œ
3. ê¸°ì¡´ ê±°ë˜ì²˜ì— ì¼ê´„ ì ìš© ê¸°ëŠ¥
4. ê°€ê²© ë³€ë™ íˆìŠ¤í† ë¦¬ ê´€ë¦¬

---

### êµ¬í˜„ ê³„íš

#### Step 1: DB ìŠ¤í‚¤ë§ˆ ìˆ˜ì •

```sql
-- ê¸°ë³¸ ê°€ê²© ì„¤ì • í…Œì´ë¸”
CREATE TABLE default_product_prices (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  category_id UUID NOT NULL REFERENCES product_categories(id),
  base_price INT NOT NULL,
  description TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(category_id)
);

-- ê°€ê²© ë³€ë™ íˆìŠ¤í† ë¦¬ í…Œì´ë¸” (ì„ íƒì )
CREATE TABLE price_history (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  category_id UUID NOT NULL REFERENCES product_categories(id),
  old_price INT,
  new_price INT NOT NULL,
  changed_by UUID REFERENCES users(id),
  change_reason TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_default_prices_category ON default_product_prices(category_id);
CREATE INDEX idx_price_history_category ON price_history(category_id);
```

#### Step 2: ì‹ ê·œ í´ë¼ì´ì–¸íŠ¸ ë“±ë¡ ì‹œ ìë™ ê°€ê²© ì„¤ì •

```typescript
// app/api/admin/clients/create/route.ts
export async function POST(request: Request) {
  const { company_name, email, ...otherData } = await request.json();

  // 1. í´ë¼ì´ì–¸íŠ¸ ìƒì„±
  const { data: client, error: clientError } = await supabase
    .from('clients')
    .insert({
      company_name,
      email,
      ...otherData,
    })
    .select()
    .single();

  if (clientError) throw clientError;

  // 2. ê¸°ë³¸ ê°€ê²©í‘œ ì¡°íšŒ
  const { data: defaultPrices } = await supabase
    .from('default_product_prices')
    .select('*');

  // 3. í´ë¼ì´ì–¸íŠ¸ë³„ ê°€ê²© ìë™ ìƒì„±
  if (defaultPrices && defaultPrices.length > 0) {
    const clientPrices = defaultPrices.map((dp) => ({
      client_id: client.id,
      category_id: dp.category_id,
      price: dp.base_price,
      is_visible: true,
    }));

    await supabase.from('client_product_prices').insert(clientPrices);
  }

  return Response.json({ success: true, client });
}
```

#### Step 3: ê¸°ë³¸ ê°€ê²© ê´€ë¦¬ í˜ì´ì§€

```typescript
// app/admin/default-prices/page.tsx
export default async function DefaultPricesPage() {
  const { data: products } = await supabase
    .from('product_categories')
    .select(`
      *,
      default_price:default_product_prices(*)
    `)
    .order('name');

  return (
    <div className="container mx-auto py-8">
      <div className="flex justify-between items-center mb-6">
        <h1 className="text-3xl font-bold">ê¸°ë³¸ ê°€ê²© ì„¤ì •</h1>
        <Badge variant="outline">
          ì„¤ì • ì™„ë£Œ: {products?.filter(p => p.default_price).length} / {products?.length}
        </Badge>
      </div>

      <Card>
        <CardHeader>
          <CardTitle>ìƒí’ˆë³„ ê¸°ë³¸ ê°€ê²©</CardTitle>
          <CardDescription>
            ì‹ ê·œ ê±°ë˜ì²˜ ë“±ë¡ ì‹œ ìë™ìœ¼ë¡œ ì ìš©ë˜ëŠ” ê°€ê²©í‘œì…ë‹ˆë‹¤.
          </CardDescription>
        </CardHeader>
        <CardContent>
          <Table>
            <TableHeader>
              <TableRow>
                <TableHead>ìƒí’ˆëª…</TableHead>
                <TableHead>í˜„ì¬ ê¸°ë³¸ ê°€ê²©</TableHead>
                <TableHead>ì„¤ëª…</TableHead>
                <TableHead>ì‘ì—…</TableHead>
              </TableRow>
            </TableHeader>
            <TableBody>
              {products?.map((product) => (
                <TableRow key={product.id}>
                  <TableCell className="font-semibold">{product.name}</TableCell>
                  <TableCell>
                    {product.default_price ? (
                      <span className="text-lg font-bold">
                        {product.default_price.base_price.toLocaleString()}ì›
                      </span>
                    ) : (
                      <Badge variant="secondary">ë¯¸ì„¤ì •</Badge>
                    )}
                  </TableCell>
                  <TableCell className="text-sm text-gray-600">
                    {product.default_price?.description || '-'}
                  </TableCell>
                  <TableCell>
                    <EditDefaultPriceDialog product={product} />
                  </TableCell>
                </TableRow>
              ))}
            </TableBody>
          </Table>
        </CardContent>
      </Card>

      <Card className="mt-6">
        <CardHeader>
          <CardTitle>ì¼ê´„ ì ìš©</CardTitle>
          <CardDescription>
            ê¸°ë³¸ ê°€ê²©ì„ ê¸°ì¡´ ê±°ë˜ì²˜ì— ì¼ê´„ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
          </CardDescription>
        </CardHeader>
        <CardContent>
          <BulkApplyPricesButton />
        </CardContent>
      </Card>
    </div>
  );
}
```

**ê¸°ë³¸ ê°€ê²© ìˆ˜ì • ë‹¤ì´ì–¼ë¡œê·¸**:
```typescript
// components/admin/default-prices/edit-dialog.tsx
export function EditDefaultPriceDialog({ product }: { product: ProductCategory }) {
  const [price, setPrice] = useState(product.default_price?.base_price || 0);
  const [description, setDescription] = useState(product.default_price?.description || '');
  const [loading, setLoading] = useState(false);

  const handleSave = async () => {
    setLoading(true);
    try {
      const res = await fetch('/api/admin/default-prices', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          category_id: product.id,
          base_price: price,
          description,
        }),
      });

      if (res.ok) {
        toast.success('ê¸°ë³¸ ê°€ê²©ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
        router.refresh();
      }
    } finally {
      setLoading(false);
    }
  };

  return (
    <Dialog>
      <DialogTrigger asChild>
        <Button size="sm" variant="outline">
          {product.default_price ? 'ìˆ˜ì •' : 'ì„¤ì •'}
        </Button>
      </DialogTrigger>
      <DialogContent>
        <DialogHeader>
          <DialogTitle>{product.name} ê¸°ë³¸ ê°€ê²© ì„¤ì •</DialogTitle>
        </DialogHeader>

        <div className="space-y-4">
          <div>
            <Label>ê¸°ë³¸ ê°€ê²© *</Label>
            <Input
              type="number"
              value={price}
              onChange={(e) => setPrice(Number(e.target.value))}
              placeholder="ê°€ê²© ì…ë ¥"
            />
          </div>

          <div>
            <Label>ì„¤ëª…</Label>
            <Textarea
              value={description}
              onChange={(e) => setDescription(e.target.value)}
              placeholder="ê°€ê²© ì„¤ëª… (ì„ íƒì‚¬í•­)"
              rows={3}
            />
          </div>
        </div>

        <DialogFooter>
          <Button variant="outline" onClick={() => {}}>
            ì·¨ì†Œ
          </Button>
          <Button onClick={handleSave} disabled={!price || loading}>
            {loading ? 'ì €ì¥ ì¤‘...' : 'ì €ì¥'}
          </Button>
        </DialogFooter>
      </DialogContent>
    </Dialog>
  );
}
```

**ì¼ê´„ ì ìš© ë²„íŠ¼**:
```typescript
// components/admin/default-prices/bulk-apply-button.tsx
'use client';

export function BulkApplyPricesButton() {
  const [loading, setLoading] = useState(false);

  const handleBulkApply = async () => {
    const confirmed = window.confirm(
      'ê¸°ë³¸ ê°€ê²©ì„ ëª¨ë“  ê±°ë˜ì²˜ì— ì¼ê´„ ì ìš©í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n' +
      'ì£¼ì˜: ê¸°ì¡´ì— ì„¤ì •ëœ ê°€ê²©ì´ ë®ì–´ì”Œì›Œì§‘ë‹ˆë‹¤.'
    );

    if (!confirmed) return;

    setLoading(true);
    try {
      const res = await fetch('/api/admin/default-prices/bulk-apply', {
        method: 'POST',
      });

      const data = await res.json();

      if (res.ok) {
        toast.success(`${data.updated_count}ê°œ ê±°ë˜ì²˜ì— ê°€ê²©ì´ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.`);
        router.refresh();
      } else {
        toast.error('ì¼ê´„ ì ìš© ì‹¤íŒ¨');
      }
    } finally {
      setLoading(false);
    }
  };

  return (
    <Button onClick={handleBulkApply} disabled={loading} variant="destructive">
      {loading ? 'ì ìš© ì¤‘...' : 'ëª¨ë“  ê±°ë˜ì²˜ì— ì¼ê´„ ì ìš©'}
    </Button>
  );
}
```

#### Step 4: API êµ¬í˜„

**ê¸°ë³¸ ê°€ê²© ì €ì¥ API**:
```typescript
// app/api/admin/default-prices/route.ts
export async function POST(request: Request) {
  const { category_id, base_price, description } = await request.json();

  // ê¸°ë³¸ ê°€ê²© UPSERT
  const { error } = await supabase
    .from('default_product_prices')
    .upsert({
      category_id,
      base_price,
      description,
      updated_at: new Date().toISOString(),
    });

  if (error) {
    return Response.json({ error: 'ê¸°ë³¸ ê°€ê²© ì €ì¥ ì‹¤íŒ¨' }, { status: 500 });
  }

  // ê°€ê²© ë³€ë™ íˆìŠ¤í† ë¦¬ ê¸°ë¡
  await supabase.from('price_history').insert({
    category_id,
    new_price: base_price,
    changed_by: session.user.id,
    change_reason: 'ê¸°ë³¸ ê°€ê²© ì„¤ì •',
  });

  return Response.json({ success: true });
}
```

**ì¼ê´„ ì ìš© API**:
```typescript
// app/api/admin/default-prices/bulk-apply/route.ts
export async function POST() {
  // 1. ëª¨ë“  í´ë¼ì´ì–¸íŠ¸ ì¡°íšŒ
  const { data: clients } = await supabase
    .from('clients')
    .select('id');

  // 2. ê¸°ë³¸ ê°€ê²©í‘œ ì¡°íšŒ
  const { data: defaultPrices } = await supabase
    .from('default_product_prices')
    .select('*');

  if (!defaultPrices || defaultPrices.length === 0) {
    return Response.json({ error: 'ê¸°ë³¸ ê°€ê²©ì´ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.' }, { status: 400 });
  }

  // 3. ê° í´ë¼ì´ì–¸íŠ¸ë³„ë¡œ ê°€ê²© ì—…ë°ì´íŠ¸
  let updatedCount = 0;

  for (const client of clients) {
    for (const dp of defaultPrices) {
      // UPSERT: ìˆìœ¼ë©´ ì—…ë°ì´íŠ¸, ì—†ìœ¼ë©´ ì‚½ì…
      await supabase
        .from('client_product_prices')
        .upsert({
          client_id: client.id,
          category_id: dp.category_id,
          price: dp.base_price,
        });

      updatedCount++;
    }
  }

  return Response.json({ success: true, updated_count: updatedCount });
}
```

---

### ì²´í¬ë¦¬ìŠ¤íŠ¸

#### ë°ì´í„°ë² ì´ìŠ¤
- [ ] default_product_prices í…Œì´ë¸” ìƒì„±
- [ ] price_history í…Œì´ë¸” ìƒì„±
- [ ] ì¸ë±ìŠ¤ ìƒì„±

#### API êµ¬í˜„
- [ ] POST /api/admin/default-prices - ê¸°ë³¸ ê°€ê²© ì €ì¥
- [ ] POST /api/admin/default-prices/bulk-apply - ì¼ê´„ ì ìš©
- [ ] POST /api/admin/clients/create - ì‹ ê·œ í´ë¼ì´ì–¸íŠ¸ ìë™ ê°€ê²© ì„¤ì •

#### ê´€ë¦¬ì UI
- [ ] ê¸°ë³¸ ê°€ê²© ì„¤ì • í˜ì´ì§€
- [ ] EditDefaultPriceDialog ì»´í¬ë„ŒíŠ¸
- [ ] BulkApplyPricesButton ì»´í¬ë„ŒíŠ¸
- [ ] ê°€ê²© íˆìŠ¤í† ë¦¬ í‘œì‹œ

#### ê¸°ëŠ¥
- [ ] ì‹ ê·œ í´ë¼ì´ì–¸íŠ¸ ìë™ ê°€ê²© ì„¤ì •
- [ ] ê¸°ì¡´ í´ë¼ì´ì–¸íŠ¸ ì¼ê´„ ì ìš©
- [ ] ê°€ê²© ë³€ë™ íˆìŠ¤í† ë¦¬ ê¸°ë¡

#### í…ŒìŠ¤íŠ¸
- [ ] ê¸°ë³¸ ê°€ê²© ì €ì¥ í…ŒìŠ¤íŠ¸
- [ ] ì‹ ê·œ í´ë¼ì´ì–¸íŠ¸ ìë™ ì„¤ì • í…ŒìŠ¤íŠ¸
- [ ] ì¼ê´„ ì ìš© í…ŒìŠ¤íŠ¸
- [ ] íˆìŠ¤í† ë¦¬ ê¸°ë¡ í™•ì¸

---

## 5. ì¹´ì¹´ì˜¤ë§µ ìŠ¹ì¸ ì•Œë¦¼ (20ë§Œì›)

### ì¶”ê°€ê¸ˆ ë°œìƒ ì´ìœ  (ë¹„ì „ë¬¸ê°€ìš©)
í˜„ì¬ëŠ” ì¹´ì¹´ì˜¤ë§µ ë¦¬ë·°ê°€ ìŠ¹ì¸ë˜ì–´ë„ ê´€ë¦¬ìê°€ ìˆ˜ë™ìœ¼ë¡œ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤. ìš”ì²­ì‚¬í•­ì€ **ìë™ìœ¼ë¡œ ê´€ë¦¬ìì—ê²Œ ì•Œë¦¼ì„ ì „ì†¡**í•˜ëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´:
1. ìŠ¹ì¸ ìƒíƒœ ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ ê°œë°œ
2. ì‹¤ì‹œê°„ ì•Œë¦¼ ì „ì†¡ ê¸°ëŠ¥
3. ê´€ë¦¬ì ì•Œë¦¼ ì„¼í„° ê°œë°œ
4. ì•Œë¦¼ ì„¤ì • ê´€ë¦¬ í™”ë©´

---

### êµ¬í˜„ ê³„íš

#### Step 1: ì•Œë¦¼ í…Œì´ë¸” (ì´ë¯¸ ì¡´ì¬í•˜ë©´ ìŠ¤í‚µ)

```sql
-- ì•Œë¦¼ í…Œì´ë¸”
CREATE TABLE IF NOT EXISTS notifications (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES users(id),
  type TEXT NOT NULL,
  title TEXT NOT NULL,
  message TEXT NOT NULL,
  link TEXT,
  is_read BOOLEAN DEFAULT false,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_notifications_user ON notifications(user_id);
CREATE INDEX idx_notifications_read ON notifications(is_read);
```

#### Step 2: ì¹´ì¹´ì˜¤ë§µ ìŠ¹ì¸ ì›¹í›…/í´ë§

**Option A: ì›¹í›… (ì¹´ì¹´ì˜¤ë§µ API ì§€ì› ì‹œ)**:
```typescript
// app/api/webhooks/kakaomap/approval/route.ts
export async function POST(request: Request) {
  const { submission_id, item_id, status } = await request.json();

  if (status === 'approved') {
    // 1. ë°ì´í„°ë² ì´ìŠ¤ ì—…ë°ì´íŠ¸
    await supabase
      .from('kakaomap_content')
      .update({ status: 'approved', approved_at: new Date().toISOString() })
      .eq('id', item_id);

    // 2. ê´€ë¦¬ìì—ê²Œ ì•Œë¦¼
    await sendAdminNotification({
      type: 'kakaomap_approved',
      title: 'ì¹´ì¹´ì˜¤ë§µ ë¦¬ë·° ìŠ¹ì¸',
      message: `ë¦¬ë·°ê°€ ìŠ¹ì¸ë˜ì—ˆìŠµë‹ˆë‹¤. (ID: ${item_id})`,
      link: `/admin/kakaomap/${submission_id}`,
    });

    // 3. í´ë¼ì´ì–¸íŠ¸ì—ê²Œë„ ì•Œë¦¼
    const { data: submission } = await supabase
      .from('kakaomap_submissions')
      .select('client_id, company_name')
      .eq('id', submission_id)
      .single();

    await sendClientNotification({
      client_id: submission.client_id,
      type: 'kakaomap_approved',
      title: 'ì¹´ì¹´ì˜¤ë§µ ë¦¬ë·° ìŠ¹ì¸',
      message: `${submission.company_name} ë¦¬ë·°ê°€ ìŠ¹ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.`,
      link: `/dashboard/review/kmap/status`,
    });
  }

  return Response.json({ success: true });
}
```

**Option B: ì£¼ê¸°ì  í´ë§ (ì›¹í›… ë¯¸ì§€ì› ì‹œ)**:
```typescript
// lib/cron/check-kakaomap-approvals.ts
export async function checkKakaomapApprovals() {
  // 1. ìŠ¹ì¸ ëŒ€ê¸° ì¤‘ì¸ ë¦¬ë·° ì¡°íšŒ
  const { data: pendingReviews } = await supabase
    .from('kakaomap_content')
    .select('*, submissions:kakaomap_submissions(*)')
    .eq('status', 'pending');

  for (const review of pendingReviews) {
    // 2. ì¹´ì¹´ì˜¤ë§µ APIë¡œ ìŠ¹ì¸ ìƒíƒœ í™•ì¸
    const status = await checkKakaomapReviewStatus(review.kakao_review_id);

    if (status === 'approved') {
      // 3. ë°ì´í„°ë² ì´ìŠ¤ ì—…ë°ì´íŠ¸
      await supabase
        .from('kakaomap_content')
        .update({ status: 'approved', approved_at: new Date().toISOString() })
        .eq('id', review.id);

      // 4. ì•Œë¦¼ ì „ì†¡
      await sendAdminNotification({
        type: 'kakaomap_approved',
        title: 'ì¹´ì¹´ì˜¤ë§µ ë¦¬ë·° ìŠ¹ì¸',
        message: `${review.submissions.company_name} ë¦¬ë·°ê°€ ìŠ¹ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.`,
        link: `/admin/kakaomap/${review.submission_id}`,
      });
    }
  }
}

// Cron ì„¤ì • (ì˜ˆ: Vercel Cron)
// vercel.json
{
  "crons": [{
    "path": "/api/cron/check-kakaomap-approvals",
    "schedule": "*/10 * * * *"  // 10ë¶„ë§ˆë‹¤ ì‹¤í–‰
  }]
}
```

#### Step 3: ê´€ë¦¬ì ì•Œë¦¼ ì„¼í„°

```typescript
// components/admin/notifications/notification-center.tsx
'use client';

export function NotificationCenter() {
  const { data: notifications, mutate } = useSWR('/api/notifications');
  const unreadCount = notifications?.filter((n) => !n.is_read).length || 0;

  const markAsRead = async (id: string) => {
    await fetch(`/api/notifications/${id}/read`, { method: 'PATCH' });
    mutate();
  };

  const markAllAsRead = async () => {
    await fetch('/api/notifications/read-all', { method: 'PATCH' });
    mutate();
  };

  return (
    <Popover>
      <PopoverTrigger asChild>
        <Button variant="ghost" size="icon" className="relative">
          <Bell className="h-5 w-5" />
          {unreadCount > 0 && (
            <span className="absolute -top-1 -right-1 h-5 w-5 bg-red-500 rounded-full text-xs text-white flex items-center justify-center">
              {unreadCount}
            </span>
          )}
        </Button>
      </PopoverTrigger>
      <PopoverContent className="w-96" align="end">
        <div className="space-y-4">
          <div className="flex items-center justify-between">
            <h3 className="font-semibold">ì•Œë¦¼</h3>
            {unreadCount > 0 && (
              <Button variant="ghost" size="sm" onClick={markAllAsRead}>
                ëª¨ë‘ ì½ìŒ
              </Button>
            )}
          </div>

          <div className="space-y-2 max-h-96 overflow-y-auto">
            {notifications?.length === 0 ? (
              <div className="text-center py-8 text-gray-500">
                ì•Œë¦¼ì´ ì—†ìŠµë‹ˆë‹¤.
              </div>
            ) : (
              notifications?.map((notification) => (
                <div
                  key={notification.id}
                  className={`p-3 rounded-lg border cursor-pointer hover:bg-gray-50 ${
                    !notification.is_read ? 'bg-blue-50 border-blue-200' : ''
                  }`}
                  onClick={() => {
                    markAsRead(notification.id);
                    if (notification.link) {
                      router.push(notification.link);
                    }
                  }}
                >
                  <div className="flex items-start gap-3">
                    <div className="mt-1">
                      {getNotificationIcon(notification.type)}
                    </div>
                    <div className="flex-1">
                      <div className="font-semibold text-sm">{notification.title}</div>
                      <div className="text-sm text-gray-600 mt-1">
                        {notification.message}
                      </div>
                      <div className="text-xs text-gray-400 mt-1">
                        {formatRelativeTime(notification.created_at)}
                      </div>
                    </div>
                    {!notification.is_read && (
                      <div className="w-2 h-2 bg-blue-500 rounded-full mt-2" />
                    )}
                  </div>
                </div>
              ))
            )}
          </div>
        </div>
      </PopoverContent>
    </Popover>
  );
}
```

#### Step 4: ì•Œë¦¼ API

```typescript
// app/api/notifications/route.ts
export async function GET() {
  const session = await getServerSession();

  const { data: notifications } = await supabase
    .from('notifications')
    .select('*')
    .eq('user_id', session.user.id)
    .order('created_at', { ascending: false })
    .limit(50);

  return Response.json(notifications);
}

// app/api/notifications/[id]/read/route.ts
export async function PATCH(
  request: Request,
  { params }: { params: { id: string } }
) {
  const { id } = await params;

  await supabase
    .from('notifications')
    .update({ is_read: true })
    .eq('id', id);

  return Response.json({ success: true });
}

// app/api/notifications/read-all/route.ts
export async function PATCH() {
  const session = await getServerSession();

  await supabase
    .from('notifications')
    .update({ is_read: true })
    .eq('user_id', session.user.id)
    .eq('is_read', false);

  return Response.json({ success: true });
}
```

---

### ì²´í¬ë¦¬ìŠ¤íŠ¸

#### ë°ì´í„°ë² ì´ìŠ¤
- [ ] notifications í…Œì´ë¸” í™•ì¸/ìƒì„±
- [ ] ì¸ë±ìŠ¤ ìƒì„±

#### API êµ¬í˜„
- [ ] POST /api/webhooks/kakaomap/approval - ìŠ¹ì¸ ì›¹í›… (Option A)
- [ ] GET /api/cron/check-kakaomap-approvals - í´ë§ í¬ë¡  (Option B)
- [ ] GET /api/notifications - ì•Œë¦¼ ëª©ë¡
- [ ] PATCH /api/notifications/[id]/read - ì½ìŒ ì²˜ë¦¬
- [ ] PATCH /api/notifications/read-all - ì „ì²´ ì½ìŒ

#### UI ì»´í¬ë„ŒíŠ¸
- [ ] NotificationCenter ì»´í¬ë„ŒíŠ¸
- [ ] ì•Œë¦¼ ì•„ì´ì½˜ ë° ë°°ì§€
- [ ] ì•Œë¦¼ í´ë¦­ ì‹œ í•´ë‹¹ í˜ì´ì§€ ì´ë™

#### ê¸°ëŠ¥
- [ ] ì¹´ì¹´ì˜¤ë§µ ìŠ¹ì¸ ê°ì§€ (ì›¹í›… ë˜ëŠ” í´ë§)
- [ ] ê´€ë¦¬ì ì•Œë¦¼ ì „ì†¡
- [ ] í´ë¼ì´ì–¸íŠ¸ ì•Œë¦¼ ì „ì†¡
- [ ] ì‹¤ì‹œê°„ ì•Œë¦¼ ì¹´ìš´íŠ¸

#### í…ŒìŠ¤íŠ¸
- [ ] ìŠ¹ì¸ ê°ì§€ í…ŒìŠ¤íŠ¸
- [ ] ì•Œë¦¼ ì „ì†¡ í…ŒìŠ¤íŠ¸
- [ ] ì•Œë¦¼ ì½ìŒ ì²˜ë¦¬ í…ŒìŠ¤íŠ¸
- [ ] ì•Œë¦¼ í´ë¦­ ë„¤ë¹„ê²Œì´ì…˜ í…ŒìŠ¤íŠ¸

---

## 6. ëŒ€ì‹œë³´ë“œ í•„í„°ë§ ì´ë™ (20ë§Œì›)

### ì¶”ê°€ê¸ˆ ë°œìƒ ì´ìœ  (ë¹„ì „ë¬¸ê°€ìš©)
í˜„ì¬ ëŒ€ì‹œë³´ë“œì˜ í†µê³„ë¥¼ í´ë¦­í•´ë„ í•´ë‹¹ ìƒíƒœë¡œ í•„í„°ë§ëœ ëª©ë¡ìœ¼ë¡œ ì´ë™í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ìš”ì²­ì‚¬í•­ì€ **í†µê³„ ì¹´ë“œë¥¼ í´ë¦­í•˜ë©´ ìë™ìœ¼ë¡œ í•„í„°ê°€ ì ìš©ëœ ëª©ë¡ í˜ì´ì§€ë¡œ ì´ë™**í•˜ëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´:
1. URL ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ê¸°ë°˜ í•„í„°ë§ ì‹œìŠ¤í…œ
2. ëŒ€ì‹œë³´ë“œ í†µê³„ ì¹´ë“œì— ë§í¬ ì¶”ê°€
3. ëª©ë¡ í˜ì´ì§€ì—ì„œ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ì½ê¸°
4. í•„í„° ìƒíƒœ ë™ê¸°í™”

---

### êµ¬í˜„ ê³„íš

#### Step 1: ëŒ€ì‹œë³´ë“œ í†µê³„ ì¹´ë“œì— ë§í¬ ì¶”ê°€

```typescript
// components/dashboard/stats-card.tsx
export function StatsCard({
  title,
  value,
  icon: Icon,
  link,
  filterKey,
  filterValue,
}: {
  title: string;
  value: number;
  icon: LucideIcon;
  link: string;
  filterKey?: string;
  filterValue?: string;
}) {
  // í•„í„° ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ìƒì„±
  const href = filterKey && filterValue
    ? `${link}?${filterKey}=${filterValue}`
    : link;

  return (
    <Link href={href}>
      <Card className="hover:shadow-lg transition-shadow cursor-pointer">
        <CardContent className="p-6">
          <div className="flex items-center justify-between">
            <div>
              <div className="text-sm text-gray-500">{title}</div>
              <div className="text-3xl font-bold mt-2">{value}</div>
            </div>
            <div className="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
              <Icon className="h-6 w-6 text-blue-600" />
            </div>
          </div>
          <div className="mt-4 text-sm text-blue-600 flex items-center">
            ìì„¸íˆ ë³´ê¸°
            <ArrowRight className="h-4 w-4 ml-1" />
          </div>
        </CardContent>
      </Card>
    </Link>
  );
}
```

#### Step 2: ëŒ€ì‹œë³´ë“œ í†µê³„ì— ì ìš©

```typescript
// app/dashboard/page.tsx
export default async function DashboardPage() {
  const stats = await getSubmissionStats();

  return (
    <div className="grid grid-cols-4 gap-6">
      {/* ì „ì²´ */}
      <StatsCard
        title="ì „ì²´ ì ‘ìˆ˜"
        value={stats.total}
        icon={Package}
        link="/dashboard/submissions"
      />

      {/* ê²€í†  ì¤‘ */}
      <StatsCard
        title="ê²€í†  ì¤‘"
        value={stats.pending}
        icon={Clock}
        link="/dashboard/submissions"
        filterKey="status"
        filterValue="pending"
      />

      {/* êµ¬ë™ ì¤‘ */}
      <StatsCard
        title="êµ¬ë™ ì¤‘"
        value={stats.in_progress}
        icon={Activity}
        link="/dashboard/submissions"
        filterKey="status"
        filterValue="in_progress"
      />

      {/* ì™„ë£Œ */}
      <StatsCard
        title="ì™„ë£Œ"
        value={stats.completed}
        icon={CheckCircle}
        link="/dashboard/submissions"
        filterKey="status"
        filterValue="completed"
      />
    </div>
  );
}
```

#### Step 3: ëª©ë¡ í˜ì´ì§€ì—ì„œ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ì²˜ë¦¬

```typescript
// app/dashboard/submissions/page.tsx
export default function SubmissionsPage({
  searchParams,
}: {
  searchParams: { status?: string; product?: string; search?: string };
}) {
  // URL ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ì—ì„œ í•„í„° ì½ê¸°
  const initialFilters = {
    status: searchParams.status || 'all',
    product: searchParams.product || 'all',
    search: searchParams.search || '',
  };

  return (
    <div>
      <SubmissionsTable initialFilters={initialFilters} />
    </div>
  );
}
```

#### Step 4: í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ì—ì„œ í•„í„° ì ìš©

```typescript
// components/dashboard/submissions-table.tsx
'use client';

export function SubmissionsTable({
  initialFilters,
}: {
  initialFilters: { status: string; product: string; search: string };
}) {
  const router = useRouter();
  const searchParams = useSearchParams();

  // ì´ˆê¸° í•„í„° ìƒíƒœ ì„¤ì •
  const [filters, setFilters] = useState(initialFilters);

  // URL ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ì™€ ë™ê¸°í™”
  useEffect(() => {
    const params = new URLSearchParams(searchParams);

    // í•„í„° ê°’ì´ ë³€ê²½ë˜ë©´ URL ì—…ë°ì´íŠ¸
    if (filters.status !== 'all') params.set('status', filters.status);
    else params.delete('status');

    if (filters.product !== 'all') params.set('product', filters.product);
    else params.delete('product');

    if (filters.search) params.set('search', filters.search);
    else params.delete('search');

    // URL ì—…ë°ì´íŠ¸ (íˆìŠ¤í† ë¦¬ì— ì¶”ê°€í•˜ì§€ ì•ŠìŒ)
    router.replace(`?${params.toString()}`, { scroll: false });
  }, [filters]);

  // í•„í„° ë³€ê²½ í•¸ë“¤ëŸ¬
  const handleFilterChange = (key: string, value: string) => {
    setFilters((prev) => ({ ...prev, [key]: value }));
  };

  return (
    <div>
      {/* í•„í„° UI */}
      <div className="flex gap-4 mb-6">
        <Select value={filters.status} onValueChange={(v) => handleFilterChange('status', v)}>
          <SelectTrigger className="w-48">
            <SelectValue />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="all">ì „ì²´ ìƒíƒœ</SelectItem>
            <SelectItem value="pending">ê²€í†  ì¤‘</SelectItem>
            <SelectItem value="in_progress">êµ¬ë™ ì¤‘</SelectItem>
            <SelectItem value="completed">ì™„ë£Œ</SelectItem>
            <SelectItem value="cancelled">ì¤‘ë‹¨ë¨</SelectItem>
          </SelectContent>
        </Select>

        <Select value={filters.product} onValueChange={(v) => handleFilterChange('product', v)}>
          <SelectTrigger className="w-48">
            <SelectValue />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="all">ì „ì²´ ìƒí’ˆ</SelectItem>
            <SelectItem value="place">ë¦¬ì›Œë“œ</SelectItem>
            <SelectItem value="receipt">ì˜ìˆ˜ì¦ ë¦¬ë·°</SelectItem>
            <SelectItem value="kakaomap">ì¹´ì¹´ì˜¤ë§µ</SelectItem>
            <SelectItem value="blog">ë¸”ë¡œê·¸ ë°°í¬</SelectItem>
          </SelectContent>
        </Select>

        <Input
          value={filters.search}
          onChange={(e) => handleFilterChange('search', e.target.value)}
          placeholder="ì—…ì²´ëª… ê²€ìƒ‰"
          className="w-64"
        />
      </div>

      {/* í…Œì´ë¸” */}
      <SubmissionsDataTable filters={filters} />
    </div>
  );
}
```

#### Step 5: ìƒí’ˆë³„ ëŒ€ì‹œë³´ë“œì—ë„ ì ìš©

```typescript
// app/dashboard/reward/status/page.tsx
export default function RewardStatusPage({
  searchParams,
}: {
  searchParams: { status?: string };
}) {
  return (
    <div>
      <h1>ë¦¬ì›Œë“œ ì§„í–‰ í˜„í™©</h1>
      <RewardStatusTable initialStatus={searchParams.status || 'all'} />
    </div>
  );
}

// ëŒ€ì‹œë³´ë“œ ë¦¬ì›Œë“œ í†µê³„ ì¹´ë“œ
<StatsCard
  title="êµ¬ë™ ì¤‘"
  value={rewardStats.in_progress}
  icon={Activity}
  link="/dashboard/reward/status"
  filterKey="status"
  filterValue="in_progress"
/>
```

---

### ì²´í¬ë¦¬ìŠ¤íŠ¸

#### ì»´í¬ë„ŒíŠ¸ ìˆ˜ì •
- [ ] StatsCard ì»´í¬ë„ŒíŠ¸ì— ë§í¬ ì¶”ê°€
- [ ] ëŒ€ì‹œë³´ë“œ í†µê³„ ì¹´ë“œì— í•„í„° ë§í¬ ì ìš©
- [ ] SubmissionsTable ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ì²˜ë¦¬
- [ ] ë¦¬ì›Œë“œ ì§„í–‰ í˜„í™© í•„í„° ë§í¬
- [ ] ì˜ìˆ˜ì¦ ë¦¬ë·° í•„í„° ë§í¬
- [ ] ì¹´ì¹´ì˜¤ë§µ ë¦¬ë·° í•„í„° ë§í¬
- [ ] ë¸”ë¡œê·¸ ë°°í¬ í•„í„° ë§í¬

#### ê¸°ëŠ¥
- [ ] URL ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ê¸°ë°˜ í•„í„°ë§
- [ ] í•„í„° ìƒíƒœì™€ URL ë™ê¸°í™”
- [ ] í•„í„° ë³€ê²½ ì‹œ URL ì—…ë°ì´íŠ¸
- [ ] ë’¤ë¡œê°€ê¸°/ì•ìœ¼ë¡œê°€ê¸° ì§€ì›

#### UI
- [ ] í†µê³„ ì¹´ë“œ í˜¸ë²„ íš¨ê³¼
- [ ] "ìì„¸íˆ ë³´ê¸°" ë²„íŠ¼ ì¶”ê°€
- [ ] í•„í„° ì ìš© ìƒíƒœ í‘œì‹œ

#### í…ŒìŠ¤íŠ¸
- [ ] í†µê³„ ì¹´ë“œ í´ë¦­ â†’ í•„í„°ë§ëœ ëª©ë¡ ì´ë™
- [ ] URL ì§ì ‘ ì…ë ¥ ì‹œ í•„í„° ì ìš©
- [ ] ë¸Œë¼ìš°ì € ë’¤ë¡œê°€ê¸°/ì•ìœ¼ë¡œê°€ê¸°
- [ ] í•„í„° ë³€ê²½ ì‹œ URL ë™ê¸°í™”

---

## ğŸ“Š ì¶”ê°€ê¸ˆ 20ë§Œì› í•­ëª© ìš”ì•½

| ìˆœë²ˆ | í•­ëª© | ë¹„ìš© | ì£¼ìš” ê¸°ëŠ¥ |
|-----|------|------|----------|
| 1 | í™˜ë¶ˆ ìŠ¹ì¸ ì›Œí¬í”Œë¡œìš° | 20ë§Œì› | ê´€ë¦¬ì ìŠ¹ì¸ í›„ í™˜ë¶ˆ ì²˜ë¦¬ |
| 2 | ì „ì²´ ìƒí’ˆ ë¸”ë¼ì¸ë“œ | 20ë§Œì› | ê¸€ë¡œë²Œ ìƒí’ˆ í™œì„±í™”/ë¹„í™œì„±í™” |
| 3 | ì¶”ì²œì¸ ID ì‹œìŠ¤í…œ | 20ë§Œì› | ì¶”ì²œ ì½”ë“œ ë° ë¦¬ì›Œë“œ ì§€ê¸‰ |
| 4 | ì „ì²´ ê¸°ë³¸ ê°€ê²© ì„¤ì • | 20ë§Œì› | ì‹ ê·œ ê±°ë˜ì²˜ ìë™ ê°€ê²© ì„¤ì • |
| 5 | ì¹´ì¹´ì˜¤ë§µ ìŠ¹ì¸ ì•Œë¦¼ | 20ë§Œì› | ì‹¤ì‹œê°„ ìŠ¹ì¸ ì•Œë¦¼ ì‹œìŠ¤í…œ |
| 6 | ëŒ€ì‹œë³´ë“œ í•„í„°ë§ ì´ë™ | 20ë§Œì› | í†µê³„ í´ë¦­ â†’ í•„í„°ë§ëœ ëª©ë¡ |

**ì´ ë¹„ìš©**: 120ë§Œì› (6ê±´ ì „ì²´ ì„ íƒ ì‹œ)

---

## âœ… ì „ì²´ ì²´í¬ë¦¬ìŠ¤íŠ¸

### 1. í™˜ë¶ˆ ìŠ¹ì¸ ì›Œí¬í”Œë¡œìš°
- [ ] DB ìŠ¤í‚¤ë§ˆ ìƒì„±
- [ ] í´ë¼ì´ì–¸íŠ¸ í™˜ë¶ˆ ìš”ì²­ API
- [ ] ê´€ë¦¬ì ìŠ¹ì¸/ê±°ë¶€ API
- [ ] í´ë¼ì´ì–¸íŠ¸ í™˜ë¶ˆ ìš”ì²­ UI
- [ ] ê´€ë¦¬ì ìŠ¹ì¸ ê´€ë¦¬ UI
- [ ] ì•Œë¦¼ ì‹œìŠ¤í…œ ì—°ë™
- [ ] í…ŒìŠ¤íŠ¸ ì™„ë£Œ

### 2. ì „ì²´ ìƒí’ˆ ë¸”ë¼ì¸ë“œ
- [ ] DB ìŠ¤í‚¤ë§ˆ ìˆ˜ì •
- [ ] ê´€ë¦¬ì ìƒí’ˆ ê´€ë¦¬ í˜ì´ì§€
- [ ] ìƒí’ˆ í™œì„±í™” í† ê¸€ API
- [ ] í´ë¼ì´ì–¸íŠ¸ í•„í„°ë§ ì ìš©
- [ ] ë¹„í™œì„±í™” ì•ˆë‚´ UI
- [ ] í…ŒìŠ¤íŠ¸ ì™„ë£Œ

### 3. ì¶”ì²œì¸ ID ì‹œìŠ¤í…œ
- [ ] DB ìŠ¤í‚¤ë§ˆ ìƒì„±
- [ ] ì¶”ì²œ ì½”ë“œ ìƒì„± í•¨ìˆ˜
- [ ] íšŒì›ê°€ì… í¼ ìˆ˜ì •
- [ ] ì¶”ì²œ ì½”ë“œ ê²€ì¦ API
- [ ] ë¦¬ì›Œë“œ ì§€ê¸‰ ë¡œì§
- [ ] ë§ˆì´í˜ì´ì§€ ì¶”ì²œ ì„¹ì…˜
- [ ] ê´€ë¦¬ì ì¶”ì²œ í†µê³„
- [ ] í…ŒìŠ¤íŠ¸ ì™„ë£Œ

### 4. ì „ì²´ ê¸°ë³¸ ê°€ê²© ì„¤ì •
- [ ] DB ìŠ¤í‚¤ë§ˆ ìƒì„±
- [ ] ê¸°ë³¸ ê°€ê²© ê´€ë¦¬ í˜ì´ì§€
- [ ] ê¸°ë³¸ ê°€ê²© ì €ì¥ API
- [ ] ì¼ê´„ ì ìš© API
- [ ] ì‹ ê·œ í´ë¼ì´ì–¸íŠ¸ ìë™ ì„¤ì •
- [ ] í…ŒìŠ¤íŠ¸ ì™„ë£Œ

### 5. ì¹´ì¹´ì˜¤ë§µ ìŠ¹ì¸ ì•Œë¦¼
- [ ] ì•Œë¦¼ í…Œì´ë¸” í™•ì¸/ìƒì„±
- [ ] ìŠ¹ì¸ ê°ì§€ ì‹œìŠ¤í…œ (ì›¹í›… ë˜ëŠ” í´ë§)
- [ ] ì•Œë¦¼ ì „ì†¡ ë¡œì§
- [ ] ê´€ë¦¬ì ì•Œë¦¼ ì„¼í„° UI
- [ ] ì•Œë¦¼ API êµ¬í˜„
- [ ] í…ŒìŠ¤íŠ¸ ì™„ë£Œ

### 6. ëŒ€ì‹œë³´ë“œ í•„í„°ë§ ì´ë™
- [ ] StatsCard ë§í¬ ì¶”ê°€
- [ ] ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ì²˜ë¦¬
- [ ] í•„í„° ìƒíƒœ ë™ê¸°í™”
- [ ] ëª¨ë“  ìƒí’ˆ í˜ì´ì§€ ì ìš©
- [ ] í…ŒìŠ¤íŠ¸ ì™„ë£Œ

### ìµœì¢… ê²€ì¦
- [ ] ì „ì²´ ë¹Œë“œ ì„±ê³µ
- [ ] TypeScript ì—ëŸ¬ ì—†ìŒ
- [ ] ëª¨ë“  ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ ì™„ë£Œ
- [ ] ë°°í¬ ì¤€ë¹„ ì™„ë£Œ
