================================================================================
                    클라이언트 요구사항 4 정리 (2025-12-05)
================================================================================

대화 참여자:
- 김주연 (개발자)
- 클라이언트

================================================================================
                           1. 사업자등록증/영수증 안내 문구 수정
================================================================================

[현재 상태]
- 현재 안내 문구 불명확

[요구사항]
- 문구 변경: "사업자등록증 or 샘플 영수증을 아래 이메일로 전송해주세요"
- 핵심: 대행사 본인 것이 아닌 "맡길 업체"의 정보 → 둘 중 하나만 있으면 됨

[관련 파일 추정]
- 이메일 안내 모달 관련 컴포넌트

================================================================================
                        2. 블로그 배포 - 이메일 전송 기능 숨김
================================================================================

[현재 상태]
- 블로그 배포 전체에서 '이메일로 보내주세요' 기능이 노출됨

[요구사항]
- '이메일로 보내주세요' 기능 숨김 처리 (삭제해도 무방)

[관련 파일]
- app/dashboard/blog-distribution/[type]/page.tsx
- components/dashboard/blog-distribution/BlogDistributionForm.tsx
- components/dashboard/blog-distribution/PaymentInfoCard.tsx

================================================================================
                    3. 포인트 충전 - 계좌번호 안내 팝업 추가
================================================================================

[현재 상태]
- 충전 요청 시 "입금할 대상" 계좌번호 안내가 없음
- 클라이언트가 어디로 입금해야 할지 알 수 없음

[요구사항]
- 충전 요청 후 새로운 팝업/다음 창에서 계좌번호 안내
- 복사하기 기능 포함
- 참고 UI: 쿠팡 무통장 입금 결제 시 뜨는 창

[구현 방향]
┌────────────────────────────────────────────────────┐
│                                                    │
│   💰 입금 계좌 안내                                 │
│                                                    │
│   충전 요청이 완료되었습니다.                        │
│   아래 계좌로 요청 금액을 입금해주세요.               │
│                                                    │
│   🏦 은행: OO은행                                  │
│   💳 계좌번호: 123-456-789012                      │
│   👤 예금주: OOO                                   │
│                        [계좌번호 복사]              │
│                                                    │
│   ※ 입금 확인 후 포인트가 충전됩니다.               │
│                                                    │
│                   [확인]                           │
│                                                    │
└────────────────────────────────────────────────────┘

[관련 파일]
- app/dashboard/points/page.tsx
- app/dashboard/points/charge-request-dialog.tsx

================================================================================
                    4. 영수증 리뷰 (PC) - 안내 문구 개선
================================================================================

[현재 상태]
- PC에서 접수 시 리워드 구동일 2일 이하일 때 "접수 실패" 메시지 표시

[요구사항]
- "접수 실패" → "구동일수 3일 이상부터 접수가 가능합니다" 안내로 변경
- 사용자 친화적인 안내 메시지

[관련 파일]
- app/dashboard/review/visitor/page.tsx (방문자 리뷰)
- 관련 폼 유효성 검사 로직

================================================================================
                    5. 리워드 (모바일) - 안내 메시지 미표시 수정
================================================================================

[현재 상태]
- 모바일에서 접수 시:
  1. 포인트 부족 안내가 나오지 않음
  2. 구동 2일 이하일 때 안내가 나오지 않음

[요구사항]
- 모바일에서도 PC와 동일하게 안내 메시지 표시
  1. 포인트 부족 시 안내
  2. 구동일수 3일 미만 시 안내

[관련 파일]
- app/dashboard/reward/submit/page.tsx
- app/dashboard/reward/submit/reward-submit-form.tsx
- 반응형 조건 체크 필요

================================================================================
                    6. 리워드 - 일별 기록/진행률 기능
================================================================================

[현재 상태]
- 일별 기록/진행률 기능이 정해진 일자에 맞춰 구현 필요

[요구사항]
- 일자별 퍼센테이지 자동 표시
- 외부에서 확인할 수 없는 유입 통계 대신 일자 기반 퍼센테이지 표시
- 예시:
  - 5일 신청 시:
    - 1일차: 20%
    - 2일차: 40%
    - 3일차: 60%
    - 4일차: 80%
    - 5일차: 100%

[구현 로직]
progress_percentage = (current_day / total_days) * 100

[관련 파일]
- app/dashboard/reward/status/[id]/page.tsx
- app/api/admin/reward/[id]/daily-records/route.ts

================================================================================
                    7. 블로그 배포 - 제한 조건 변경
================================================================================

[현재 상태]
- 구동일수 제한 + 총건수 제한이 모두 적용됨

[요구사항]
- 구동일수 제한 제거
- 총 접수건 30건 이상만 제한 조건으로 적용

[관련 파일]
- components/dashboard/blog-distribution/BlogDistributionForm.tsx
- app/api/submissions/blog-distribution/route.ts

================================================================================
                    8. 블로그 배포 (클라이언트) - 구동일자 지정 기능
================================================================================

[현재 상태]
- 당일 구동이 기본으로 설정됨

[요구사항]
- 모든 상품이 당일 구동 어려움
- 접수 시 당일 제외하고 구동일자 지정 가능하도록
- 예시: 12월 4일 접수 → 12월 8일부터 구동 설정
- 구동 지정 최대 일수: 30일

[구현 UI]
- 달력 형태의 날짜 선택 컴포넌트
- 오늘 날짜는 비활성화
- 최대 30일 후까지 선택 가능

[관련 파일]
- components/dashboard/blog-distribution/BlogDistributionForm.tsx
- types/blog-distribution/types.ts

================================================================================
                    9. 블로그 배포 (관리자) - 달력 형식 조회 기능
================================================================================

[현재 상태]
- 관리자가 접수 내역 조회 시 일반 필터만 사용

[요구사항]
- 구동일수에 맞춰 전날 접수 진행
- 달력 형식으로 날짜 클릭하여 해당 날짜 접수 내역 확인

[구현 UI]
- 달력 컴포넌트 추가
- 날짜 클릭 → 해당 날짜 접수 내역 필터링

[관련 파일]
- app/admin/blog-distribution/page.tsx (생성 필요할 수 있음)
- 관련 테이블 컴포넌트

================================================================================
                    10. 카카오맵 리뷰 - 업체명 자동 추출 기능
================================================================================

[현재 상태]
- 카카오맵 리뷰 접수란에서 링크 입력 시 업체명이 자동으로 불러와지지 않음
- 네이버는 MID 값으로 업체명 자동 인식 구현됨

[요구사항]
- 네이버와 동일하게 카카오맵 링크 입력 시 업체명 자동 추출
- 카카오맵 MID 값을 통해 업체명 인식

[구현 방향]
- 카카오맵 URL 파싱 로직 구현
- 카카오맵 API 또는 스크래핑으로 업체 정보 추출
- 예: https://place.map.kakao.com/12345678 → MID: 12345678

[관련 파일]
- app/dashboard/review/kmap/page.tsx
- utils/kakao-place.ts (신규 생성 필요)
- 기존 utils/naver-place.ts 참고

================================================================================
                        구현 우선순위 및 진행 상황
================================================================================

[Phase 1 - 즉시 구현 가능 (간단한 UI/텍스트 변경)] ✅ 완료
✅ 1. 사업자등록증/영수증 안내 문구 수정 (2025-12-05)
   - visitor/page.tsx: "사업자등록증 or 샘플 영수증 (둘 중 하나)" 로 변경

✅ 2. 블로그 배포 - 이메일 전송 기능 숨김 (2025-12-05)
   - BlogDistributionForm.tsx: 이메일 안내 섹션 주석 처리
   - [type]/page.tsx: 이메일 확인 다이얼로그 주석 처리, 바로 제출 처리

✅ 4. 영수증 리뷰 PC - 안내 문구 개선 (2025-12-05)
   - visitor/page.tsx: 구동일수 3일 미만 시 토스트 안내 추가
   - "구동일수는 3일 이상부터 접수가 가능합니다"

[Phase 2 - 중간 복잡도] ✅ 완료
✅ 5. 리워드 모바일 - 안내 메시지 수정 (2025-12-05)
   - toast.tsx: 모바일에서 토스트 안 보이던 문제 해결
   - 위치: 모든 화면에서 하단 표시 (카카오 버튼 위)
   - X 버튼: 모바일에서 항상 보이도록 수정

✅ 4-2. 리워드 - 구동일수 3일 미만 안내 개선 (2025-12-05)
   - reward-submit-form.tsx: 구동일수 최소 3일로 변경, 토스트 안내 추가
   - API route.ts: 3일 미만 시 명확한 에러 메시지 반환
   - "구동일수는 3일 이상부터 접수가 가능합니다" 안내

✅ 6. 리워드 - 일별 진행률 자동 계산 기능 (2025-12-05)
   - status/[id]/page.tsx: calculateAutoProgress 함수 구현
   - 구동 시작일 기반 자동 진행률 계산 (관리자 입력 불필요)
   - 상단 카드: 일자 기준 진행률 % 표시
   - 개요 탭: 진행 현황 상세 카드 (프로그레스바, 시작일/종료일, 현재 일차)

✅ 6-2. 리워드 - 관리자 캘린더 날짜 수정 (2025-12-05)
   - DailyRecordCalendar.tsx: startDateStr prop 추가
   - 시작일/마감일이 접수일(createdAt) 대신 실제 구동 시작일(start_date) 사용
   - 마감일 계산: 시작일 + (구동일수 - 1)

✅ 6-3. 리워드 - 일별 자동 기록 기능 (2025-12-05)
   - DailyRecordCalendar.tsx: generateAutoRecords 함수 구현
   - 시작일 ~ 오늘까지 자동으로 일 접수량 기록 표시
   - 자동 계산(하늘색) vs 수동 입력(파란색) 구분
   - 예: 12/9 시작, 일 100타 → 12/9 되면 자동으로 "100건" 표시

✅ 3. 포인트 충전 - 계좌번호 안내 팝업 추가 (2025-12-05)
   - charge-request-dialog.tsx: 2단계 플로우 구현 (폼 → 계좌안내)
   - 계산서 발행: 신한은행 110-613-141483 (센스애드/문주영)
   - 계산서 미발행: 카카오뱅크 79422509038 (소문섭)
   - 계좌번호 복사 기능, 고급스러운 그라데이션 UI

✅ 7. 블로그 배포 - 제한 조건 변경 (2025-12-05)
   - [type]/page.tsx: 10일 구동일수 제한 제거
   - BlogDistributionForm.tsx: 힌트 문구 수정
   - 현재 조건: 일 접수량 최소 3건 + 총 30건 이상만 유지

✅ 8. 블로그 배포 클라이언트 - 구동일자 지정 기능 (2025-12-05)
   - 캘린더 형태로 시작일/종료일 선택
   - 주말(금18시 이후/토/일) 접수 시 화요일부터 시작 가능
   - 평일 접수 시 내일부터 시작 가능
   - 카카오맵/방문자리뷰/블로그배포/리워드 모두 적용됨

[Phase 3 - 높은 복잡도] ✅ 완료
✅ 9. 전체 접수 내역 - 캘린더 기반 날짜 필터링 (2025-12-05)
   - SubmissionsFilters.tsx: 접수일/구동일 캘린더 Popover UI
   - admin-submissions-table.tsx: 날짜 필터 상태 관리
   - submission-helpers.ts: 날짜 필터링 로직 확장
   - 접수일 지정: 특정 날짜에 접수된 내역 조회
   - 구동일 지정: 특정 날짜에 구동 시작하는 내역 조회

✅ 10. 카카오맵 리뷰 - 업체명 자동 추출 (2025-12-05)
   - utils/kakao-place.ts: URL 파싱 유틸리티 (extractKakaoPlaceMID, fetchKakaoBusinessInfoByMID)
   - app/api/kakao-place/[mid]/route.ts: 카카오맵 페이지 스크래핑 API
   - app/dashboard/review/kmap/page.tsx: 자동 추출 기능 연동
   - URL 형식: https://place.map.kakao.com/[MID]
   - og:title, title 태그, JSON-LD 등으로 업체명 추출

================================================================================
                        예상 작업량
================================================================================

| 항목                                  | 예상 복잡도 | 관련 파일 수 |
|--------------------------------------|------------|-------------|
| 1. 사업자등록증 문구 수정              | 낮음       | 1-2개       |
| 2. 블로그 배포 이메일 기능 숨김         | 낮음       | 1-2개       |
| 3. 포인트 충전 계좌 안내 팝업          | 중간       | 2-3개       |
| 4. 영수증 리뷰 안내 문구               | 낮음       | 1-2개       |
| 5. 리워드 모바일 안내                  | 중간       | 2-3개       |
| 6. 리워드 일별 진행률                  | 중간       | 2-3개       |
| 7. 블로그 배포 제한 조건 변경          | 낮음       | 1-2개       |
| 8. 블로그 배포 구동일자 지정           | 중간       | 3-4개       |
| 9. 관리자 달력 조회                   | 중간-높음   | 3-4개       |
| 10. 카카오맵 업체명 추출              | 높음       | 3-5개       |

================================================================================
                           END OF DOCUMENT
================================================================================
